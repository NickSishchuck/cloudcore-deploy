import{r as ge,W as tt,s as ye,d as m,w as g,p as xe,b as Y,i as M,e as h,q as X,f as v,h as C,x as se,k as A,j as G,l as b,m as V,t as j,o as be,X as Ne,n as we,Y as lt,Z as ae,_ as Jt,y as Ce,$ as rt,I as Zt,J as Be,A as nt,D as Ue,E as Le,a0 as Qt,c as ot,u as ct,g as ut,a as ft,a1 as Ge,B as $t,a2 as xt}from"../chunks/BOgt6p_H.js";import{a as ee,t as te,S as Te,i as Ee,d as me,m as _e,c as pe,b as ve,g as Pe,e as Ae,f as he,h as je}from"../chunks/76xsp2ES.js";import{d as Kt,w as Wt,g as Gt}from"../chunks/EbPgK0_z.js";import{a as Ze,T as el,L as tl,t as He,c as jt,n as qe,i as ll}from"../chunks/CddTKE1z.js";const nl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ve(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function st(l,e){te(l,1,1,()=>{e.delete(l.key)})}function at(l,e,t,n,s,a,i,r,c,o,u,d){let f=l.length,_=a.length,p=f;const D={};for(;p--;)D[l[p].key]=p;const E=[],w=new Map,T=new Map,F=[];for(p=_;p--;){const S=d(s,a,p),R=t(S);let U=i.get(R);U?F.push(()=>U.p(S,e)):(U=o(R,S),U.c()),w.set(R,E[p]=U),R in D&&T.set(R,Math.abs(p-D[R]))}const L=new Set,k=new Set;function P(S){ee(S,1),S.m(r,u),i.set(S.key,S),u=S.first,_--}for(;f&&_;){const S=E[_-1],R=l[f-1],U=S.key,B=R.key;S===R?(u=S.first,f--,_--):w.has(B)?!i.has(U)||L.has(U)?P(S):k.has(B)?f--:T.get(U)>T.get(B)?(k.add(U),P(S)):(L.add(B),f--):(c(R,i),f--)}for(;f--;){const S=l[f];w.has(S.key)||c(S,i)}for(;_;)P(E[_-1]);return ge(F),E}function sl(){const{subscribe:l,set:e,update:t}=Wt({files:[],currentFolderId:null,breadcrumbPath:[],selectedItems:new Set,isLoading:!1,currentSection:"mydrive",sortColumn:"name",sortDirection:"asc"});return{subscribe:l,setFiles:n=>t(s=>({...s,files:n})),setLoading:n=>t(s=>({...s,isLoading:n})),setCurrentFolder:n=>t(s=>({...s,currentFolderId:n})),setBreadcrumbPath:n=>t(s=>({...s,breadcrumbPath:n})),setSelectedItems:n=>t(s=>({...s,selectedItems:new Set(n)})),clearSelection:()=>t(n=>({...n,selectedItems:new Set})),toggleSelection:n=>t(s=>{const a=new Set(s.selectedItems);return a.has(n)?a.delete(n):a.add(n),{...s,selectedItems:a}}),setSection:n=>t(s=>({...s,currentSection:n})),setSort:(n,s)=>t(a=>({...a,sortColumn:n,sortDirection:s})),reset:()=>e({files:[],currentFolderId:null,breadcrumbPath:[],selectedItems:new Set,isLoading:!1,currentSection:"mydrive",sortColumn:"name",sortDirection:"asc"})}}const Se=sl(),al=Kt(Se,l=>{const{files:e,sortColumn:t,sortDirection:n}=l;return[...e].sort((s,a)=>{let i=s[t],r=a[t];return t==="name"&&(i=i==null?void 0:i.toLowerCase(),r=r==null?void 0:r.toLowerCase()),i<r?n==="asc"?-1:1:i>r?n==="asc"?1:-1:0})}),il=Kt(Se,l=>l.selectedItems.size);function rl(){const{subscribe:l,update:e}=Wt([]);return{subscribe:l,add:t=>e(n=>[...n,t]),updateProgress:(t,n,s,a)=>e(i=>i.map(r=>r.id===t?{...r,progress:n,loaded:s,total:a}:r)),setStatus:(t,n)=>e(s=>s.map(a=>a.id===t?{...a,status:n}:a)),remove:t=>e(n=>n.filter(s=>s.id!==t)),clear:()=>e(()=>[])}}const Ke=rl(),ol="http://localhost:5000";class cl{constructor(){this.baseUrl=ol}getHeaders(e=!0){const t={"Content-Type":"application/json"};if(e){const n=tt(Ze);n.token&&(t.Authorization=`Bearer ${n.token}`)}return t}async handleResponse(e){if(e.status===401)throw Ze.logout(),new Error("Unauthorized");let t;try{t=await e.json()}catch{t={}}if(!e.ok){const n=new Error(t.message||`HTTP ${e.status}`);throw n.errorCode=t.errorCode||t.code||null,n.status=e.status,n.data=t,n}return t}async login(e,t){const n=await fetch(`${this.baseUrl}/auth/login`,{method:"POST",headers:this.getHeaders(!1),body:JSON.stringify({username:e,password:t})});return this.handleResponse(n)}async register(e,t,n){const s=await fetch(`${this.baseUrl}/auth/register`,{method:"POST",headers:this.getHeaders(!1),body:JSON.stringify({username:e,email:t,password:n})});return this.handleResponse(s)}async getFiles(e,t={}){const n=new URLSearchParams(t).toString(),s=`${this.baseUrl}/user/${e}/mydrive?${n}`,a=await fetch(s,{method:"GET",headers:this.getHeaders()});return this.handleResponse(a)}async uploadFile(e,t,n=null,s=null){const a=new FormData;a.append("file",t),n&&a.append("parentId",n);const i=new XMLHttpRequest,r=new Promise((c,o)=>{i.upload.addEventListener("progress",d=>{if(d.lengthComputable&&s){const f=d.loaded/d.total*100;s(f,d.loaded,d.total)}}),i.addEventListener("load",()=>{if(i.status>=200&&i.status<300)try{const d=JSON.parse(i.responseText);c(d)}catch{o(new Error("Failed to parse response"))}else o(new Error(`Upload failed: ${i.status}`))}),i.addEventListener("error",()=>o(new Error("Network error"))),i.addEventListener("abort",()=>o(new Error("Upload cancelled"))),i.open("POST",`${this.baseUrl}/user/${e}/mydrive/upload`);const u=tt(Ze);u.token&&i.setRequestHeader("Authorization",`Bearer ${u.token}`),i.send(a)});return r.cancel=()=>i.abort(),r}async createFolder(e,t,n=null){const s=await fetch(`${this.baseUrl}/user/${e}/mydrive/createfolder`,{method:"POST",headers:this.getHeaders(),body:JSON.stringify({name:t,parentId:n})});return this.handleResponse(s)}async deleteItem(e,t){const n=await fetch(`${this.baseUrl}/user/${e}/mydrive/${t}/delete`,{method:"DELETE",headers:this.getHeaders()});return this.handleResponse(n)}async renameItem(e,t,n){const s=await fetch(`${this.baseUrl}/user/${e}/mydrive/${t}/rename`,{method:"PUT",headers:this.getHeaders(),body:JSON.stringify(n)});return this.handleResponse(s)}async downloadFile(e,t){const n=await fetch(`${this.baseUrl}/user/${e}/mydrive/${t}/download`,{method:"GET",headers:{Authorization:`Bearer ${tt(Ze).token}`}});if(!n.ok)throw new Error("Download failed");return n.blob()}async moveItem(e,t,n){const s=n??0,a=await fetch(`${this.baseUrl}/user/${e}/mydrive/${t}/move/${s}`,{method:"POST",headers:this.getHeaders()});return this.handleResponse(a)}async getPersonalStorage(e){const t=await fetch(`${this.baseUrl}/user/${e}/storage/personal`,{method:"GET",headers:this.getHeaders()});return this.handleResponse(t)}}const Qe=new cl;function ul(l){var J;let e,t,n='<div class="logo">CloudCore Drive</div>',s,a,i,r,c,o,u='<span class="material-symbols-outlined">search</span>',d,f,_,p,D,E,w,T,F="account_circle",L,k,P=(((J=l[2])==null?void 0:J.username)||"User")+"",S,R,U,B,O;return _=new el({}),D=new tl({}),{c(){e=b("div"),t=b("div"),t.innerHTML=n,s=V(),a=b("div"),i=b("input"),c=V(),o=b("div"),o.innerHTML=u,d=V(),f=b("div"),ve(_.$$.fragment),p=V(),ve(D.$$.fragment),E=V(),w=b("button"),T=b("span"),T.textContent=F,L=V(),k=b("span"),S=j(P),this.h()},l(N){e=v(N,"DIV",{class:!0});var y=C(e);t=v(y,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-pmd1yv"&&(t.innerHTML=n),s=A(y),a=v(y,"DIV",{class:!0});var K=C(a);i=v(K,"INPUT",{type:!0,class:!0,placeholder:!0}),c=A(K),o=v(K,"DIV",{class:!0,"data-svelte-h":!0}),se(o)!=="svelte-9xewqh"&&(o.innerHTML=u),K.forEach(m),d=A(y),f=v(y,"DIV",{class:!0});var z=C(f);pe(_.$$.fragment,z),p=A(z),pe(D.$$.fragment,z),E=A(z),w=v(z,"BUTTON",{class:!0,title:!0});var H=C(w);T=v(H,"SPAN",{class:!0,"data-svelte-h":!0}),se(T)!=="svelte-7rvcdf"&&(T.textContent=F),L=A(H),k=v(H,"SPAN",{});var q=C(k);S=G(q,P),q.forEach(m),H.forEach(m),z.forEach(m),y.forEach(m),this.h()},h(){g(t,"class","header-left"),g(i,"type","text"),g(i,"class","search-box"),g(i,"placeholder",r=l[1]("searchPlaceholder")),g(o,"class","search-icon"),g(a,"class","search-container"),g(T,"class","material-symbols-outlined"),g(w,"class","user-menu-btn"),g(w,"title",R=l[1]("settings")),g(f,"class","header-right"),g(e,"class","header")},m(N,y){M(N,e,y),h(e,t),h(e,s),h(e,a),h(a,i),xe(i,l[0]),h(a,c),h(a,o),h(e,d),h(e,f),_e(_,f,null),h(f,p),_e(D,f,null),h(f,E),h(f,w),h(w,T),h(w,L),h(w,k),h(k,S),U=!0,B||(O=[X(i,"input",l[5]),X(i,"keypress",l[3]),X(w,"click",l[4])],B=!0)},p(N,[y]){var K;(!U||y&2&&r!==(r=N[1]("searchPlaceholder")))&&g(i,"placeholder",r),y&1&&i.value!==N[0]&&xe(i,N[0]),(!U||y&4)&&P!==(P=(((K=N[2])==null?void 0:K.username)||"User")+"")&&Y(S,P),(!U||y&2&&R!==(R=N[1]("settings")))&&g(w,"title",R)},i(N){U||(ee(_.$$.fragment,N),ee(D.$$.fragment,N),U=!0)},o(N){te(_.$$.fragment,N),te(D.$$.fragment,N),U=!1},d(N){N&&m(e),me(_),me(D),B=!1,ge(O)}}}function fl(l,e,t){let n,s;be(l,He,d=>t(1,n=d)),be(l,jt,d=>t(2,s=d));const a=Ne();let i="";function r(){i.trim()&&a("search",i.trim())}function c(d){d.key==="Enter"&&r()}function o(){Gt("/settings")}function u(){i=this.value,t(0,i)}return[i,n,s,c,o,u]}class dl extends Te{constructor(e){super(),Ee(this,e,fl,ul,ye,{})}}function dt(l,e,t){const n=l.slice();return n[11]=e[t],n}function ht(l){let e,t,n,s="upload_file",a,i,r=l[2]("uploadFiles")+"",c,o,u,d,f="drive_folder_upload",_,p,D=l[2]("uploadFolder")+"",E,w,T;return{c(){e=b("div"),t=b("div"),n=b("span"),n.textContent=s,a=V(),i=b("span"),c=j(r),o=V(),u=b("div"),d=b("span"),d.textContent=f,_=V(),p=b("span"),E=j(D),this.h()},l(F){e=v(F,"DIV",{class:!0});var L=C(e);t=v(L,"DIV",{class:!0});var k=C(t);n=v(k,"SPAN",{class:!0,"data-svelte-h":!0}),se(n)!=="svelte-ii009b"&&(n.textContent=s),a=A(k),i=v(k,"SPAN",{});var P=C(i);c=G(P,r),P.forEach(m),k.forEach(m),o=A(L),u=v(L,"DIV",{class:!0});var S=C(u);d=v(S,"SPAN",{class:!0,"data-svelte-h":!0}),se(d)!=="svelte-hmrwca"&&(d.textContent=f),_=A(S),p=v(S,"SPAN",{});var R=C(p);E=G(R,D),R.forEach(m),S.forEach(m),L.forEach(m),this.h()},h(){g(n,"class","material-symbols-outlined"),g(t,"class","dropdown-item"),g(d,"class","material-symbols-outlined"),g(u,"class","dropdown-item"),g(e,"class","dropdown-content show")},m(F,L){M(F,e,L),h(e,t),h(t,n),h(t,a),h(t,i),h(i,c),h(e,o),h(e,u),h(u,d),h(u,_),h(u,p),h(p,E),w||(T=[X(t,"click",l[6]),X(u,"click",l[7])],w=!0)},p(F,L){L&4&&r!==(r=F[2]("uploadFiles")+"")&&Y(c,r),L&4&&D!==(D=F[2]("uploadFolder")+"")&&Y(E,D)},d(F){F&&m(e),w=!1,ge(T)}}}function mt(l){let e,t,n=l[11].icon+"",s,a,i,r=l[2](l[11].label)+"",c,o,u;function d(){return l[8](l[11])}return{c(){e=b("button"),t=b("span"),s=j(n),a=V(),i=b("span"),c=j(r),this.h()},l(f){e=v(f,"BUTTON",{class:!0});var _=C(e);t=v(_,"SPAN",{class:!0});var p=C(t);s=G(p,n),p.forEach(m),a=A(_),i=v(_,"SPAN",{});var D=C(i);c=G(D,r),D.forEach(m),_.forEach(m),this.h()},h(){g(t,"class","material-symbols-outlined"),g(e,"class","sidebar-item"),ae(e,"active",l[0]===l[11].id)},m(f,_){M(f,e,_),h(e,t),h(t,s),h(e,a),h(e,i),h(i,c),o||(u=X(e,"click",d),o=!0)},p(f,_){l=f,_&4&&r!==(r=l[2](l[11].label)+"")&&Y(c,r),_&9&&ae(e,"active",l[0]===l[11].id)},d(f){f&&m(e),o=!1,u()}}}function hl(l){let e,t,n,s,a="add",i,r,c=l[2]("new")+"",o,u,d,f="expand_more",_,p,D,E,w,T,F,L="delete",k,P,S=l[2]("trash")+"",R,U,B,O=l[1]&&ht(l),J=Ve(l[3].slice(0,3)),N=[];for(let y=0;y<J.length;y+=1)N[y]=mt(dt(l,J,y));return{c(){e=b("div"),t=b("div"),n=b("button"),s=b("span"),s.textContent=a,i=V(),r=b("span"),o=j(c),u=V(),d=b("span"),d.textContent=f,_=V(),O&&O.c(),p=V();for(let y=0;y<N.length;y+=1)N[y].c();D=V(),E=b("div"),w=V(),T=b("button"),F=b("span"),F.textContent=L,k=V(),P=b("span"),R=j(S),this.h()},l(y){e=v(y,"DIV",{class:!0});var K=C(e);t=v(K,"DIV",{class:!0});var z=C(t);n=v(z,"BUTTON",{class:!0});var H=C(n);s=v(H,"SPAN",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1wztoae"&&(s.textContent=a),i=A(H),r=v(H,"SPAN",{});var q=C(r);o=G(q,c),q.forEach(m),u=A(H),d=v(H,"SPAN",{class:!0,"data-svelte-h":!0}),se(d)!=="svelte-1113dzk"&&(d.textContent=f),H.forEach(m),_=A(z),O&&O.l(z),z.forEach(m),p=A(K);for(let ue=0;ue<N.length;ue+=1)N[ue].l(K);D=A(K),E=v(K,"DIV",{class:!0}),C(E).forEach(m),w=A(K),T=v(K,"BUTTON",{class:!0});var Z=C(T);F=v(Z,"SPAN",{class:!0,"data-svelte-h":!0}),se(F)!=="svelte-1v24jz4"&&(F.textContent=L),k=A(Z),P=v(Z,"SPAN",{});var le=C(P);R=G(le,S),le.forEach(m),Z.forEach(m),K.forEach(m),this.h()},h(){g(s,"class","material-symbols-outlined"),g(d,"class","material-symbols-outlined dropdown-arrow"),g(n,"class","new-button"),ae(n,"active",l[1]),g(t,"class","new-dropdown"),g(E,"class","sidebar-divider"),g(F,"class","material-symbols-outlined"),g(T,"class","sidebar-item"),ae(T,"active",l[0]==="trash"),g(e,"class","sidebar")},m(y,K){M(y,e,K),h(e,t),h(t,n),h(n,s),h(n,i),h(n,r),h(r,o),h(n,u),h(n,d),h(t,_),O&&O.m(t,null),h(e,p);for(let z=0;z<N.length;z+=1)N[z]&&N[z].m(e,null);h(e,D),h(e,E),h(e,w),h(e,T),h(T,F),h(T,k),h(T,P),h(P,R),U||(B=[X(n,"click",l[5]),X(T,"click",l[9])],U=!0)},p(y,[K]){if(K&4&&c!==(c=y[2]("new")+"")&&Y(o,c),K&2&&ae(n,"active",y[1]),y[1]?O?O.p(y,K):(O=ht(y),O.c(),O.m(t,null)):O&&(O.d(1),O=null),K&29){J=Ve(y[3].slice(0,3));let z;for(z=0;z<J.length;z+=1){const H=dt(y,J,z);N[z]?N[z].p(H,K):(N[z]=mt(H),N[z].c(),N[z].m(e,D))}for(;z<N.length;z+=1)N[z].d(1);N.length=J.length}K&4&&S!==(S=y[2]("trash")+"")&&Y(R,S),K&1&&ae(T,"active",y[0]==="trash")},i:we,o:we,d(y){y&&m(e),O&&O.d(),lt(N,y),U=!1,ge(B)}}}function ml(l,e,t){let n;be(l,He,p=>t(2,n=p));let{currentSection:s="mydrive"}=e;const a=Ne();let i=!1;const r=[{id:"mydrive",icon:"storage",label:"myDrive"},{id:"recent",icon:"schedule",label:"recent"},{id:"shared",icon:"people",label:"shared"},{id:"trash",icon:"delete",label:"trash"}];function c(p){a("sectionChange",p)}function o(){t(1,i=!i)}function u(){t(1,i=!1),a("upload")}function d(){t(1,i=!1),a("uploadFolder")}const f=p=>c(p.id),_=()=>c("trash");return l.$$set=p=>{"currentSection"in p&&t(0,s=p.currentSection)},[s,i,n,r,c,o,u,d,f,_]}class _l extends Te{constructor(e){super(),Ee(this,e,ml,hl,ye,{currentSection:0})}}function Xe(l){if(!l||l===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(2))+" "+t[n]}function $e(l){if(!l)return"-";const e=l.endsWith("Z")?l:l+"Z",t=new Date(e),n=new Date;return t.toDateString()===n.toDateString()?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):t.toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})}function pl(l){var n,s;if(l.type==="folder")return{icon:"folder",class:"folder"};const e=(s=(n=l.name)==null?void 0:n.split(".").pop())==null?void 0:s.toLowerCase(),t=l.mimeType||"";return t.startsWith("image/")?{icon:"image",class:"image"}:e==="pdf"||t==="application/pdf"?{icon:"picture_as_pdf",class:"pdf"}:e==="html"||t==="text/html"?{icon:"code",class:"html"}:t.startsWith("text/")?{icon:"description",class:"file"}:{icon:"description",class:"file"}}function vl(l){let e,t,n,s,a,i=l[5].icon+"",r,c,o,u=l[0].name+"",d,f,_,p=$e(l[0].createdAt)+"",D,E,w,T=$e(l[0].updatedAt)+"",F,L,k,P,S,R,U,B,O;return{c(){e=b("tr"),t=b("td"),n=V(),s=b("td"),a=b("span"),r=j(i),o=V(),d=j(u),f=V(),_=b("td"),D=j(p),E=V(),w=b("td"),F=j(T),L=V(),k=b("td"),P=j(l[4]),this.h()},l(J){e=v(J,"TR",{class:!0,"data-item-id":!0,"data-item-type":!0,draggable:!0});var N=C(e);t=v(N,"TD",{class:!0}),C(t).forEach(m),n=A(N),s=v(N,"TD",{});var y=C(s);a=v(y,"SPAN",{class:!0});var K=C(a);r=G(K,i),K.forEach(m),o=A(y),d=G(y,u),y.forEach(m),f=A(N),_=v(N,"TD",{});var z=C(_);D=G(z,p),z.forEach(m),E=A(N),w=v(N,"TD",{});var H=C(w);F=G(H,T),H.forEach(m),L=A(N),k=v(N,"TD",{});var q=C(k);P=G(q,l[4]),q.forEach(m),N.forEach(m),this.h()},h(){g(t,"class","col-indicator"),g(a,"class",c="file-list-icon "+l[5].class+" material-symbols-outlined"),g(e,"class","file-list-row"),g(e,"data-item-id",S=l[0].id),g(e,"data-item-type",R=l[0].type),g(e,"draggable",U=!l[2]),ae(e,"selected",l[1]),ae(e,"trash-mode",l[2]),ae(e,"drag-over",l[3])},m(J,N){M(J,e,N),h(e,t),h(e,n),h(e,s),h(s,a),h(a,r),h(s,o),h(s,d),h(e,f),h(e,_),h(_,D),h(e,E),h(e,w),h(w,F),h(e,L),h(e,k),h(k,P),B||(O=[X(e,"click",l[13]),X(e,"dblclick",l[12]),X(e,"dragstart",l[14]),X(e,"dragenter",l[7]),X(e,"dragleave",l[8]),X(e,"dragover",l[9]),X(e,"drop",l[10]),X(e,"contextmenu",l[11])],B=!0)},p(J,[N]){N&32&&i!==(i=J[5].icon+"")&&Y(r,i),N&32&&c!==(c="file-list-icon "+J[5].class+" material-symbols-outlined")&&g(a,"class",c),N&1&&u!==(u=J[0].name+"")&&Y(d,u),N&1&&p!==(p=$e(J[0].createdAt)+"")&&Y(D,p),N&1&&T!==(T=$e(J[0].updatedAt)+"")&&Y(F,T),N&16&&Y(P,J[4]),N&1&&S!==(S=J[0].id)&&g(e,"data-item-id",S),N&1&&R!==(R=J[0].type)&&g(e,"data-item-type",R),N&4&&U!==(U=!J[2])&&g(e,"draggable",U),N&2&&ae(e,"selected",J[1]),N&4&&ae(e,"trash-mode",J[2]),N&8&&ae(e,"drag-over",J[3])},i:we,o:we,d(J){J&&m(e),B=!1,ge(O)}}}function bl(l,e,t){let n,s,{item:a}=e,{selected:i=!1}=e,{isTrashView:r=!1}=e;const c=Ne();let o=!1;function u(T){a.type==="folder"&&(T.preventDefault(),t(3,o=!0))}function d(){t(3,o=!1)}function f(T){a.type==="folder"&&T.preventDefault()}function _(T){t(3,o=!1),a.type==="folder"&&c("drop",T)}function p(T){T.preventDefault(),c("contextmenu",{event:T,item:a})}function D(T){Jt.call(this,l,T)}const E=T=>c("click",T),w=T=>c("dragstart",T);return l.$$set=T=>{"item"in T&&t(0,a=T.item),"selected"in T&&t(1,i=T.selected),"isTrashView"in T&&t(2,r=T.isTrashView)},l.$$.update=()=>{l.$$.dirty&1&&t(5,n=pl(a)),l.$$.dirty&1&&t(4,s=a.type==="file"&&a.fileSize?Xe(a.fileSize):"-")},[a,i,r,o,s,n,c,u,d,f,_,p,D,E,w]}class gl extends Te{constructor(e){super(),Ee(this,e,bl,vl,ye,{item:0,selected:1,isTrashView:2})}}function _t(l,e,t){const n=l.slice();return n[30]=e[t],n}function wl(l,e,t){const n=l.slice();return n[27]=e[t],n[29]=t,n}function kl(l){let e,t,n,s,a,i,r=l[7]("name")+"",c,o,u,d,f=l[7]("created")+"",_,p,D,E,w=l[7]("modified")+"",T,F,L,k,P=l[7]("size")+"",S,R,U,B,O=[],J=new Map,N,y,K,z=l[4]==="name"&&pt(l),H=l[4]==="createdAt"&&vt(l),q=l[4]==="updatedAt"&&bt(l),Z=l[4]==="fileSize"&&gt(l),le=Ve(l[6]);const ue=$=>$[30].id;for(let $=0;$<le.length;$+=1){let x=_t(l,le,$),ie=ue(x);J.set(ie,O[$]=wt(ie,x))}return{c(){e=b("table"),t=b("thead"),n=b("tr"),s=b("th"),a=V(),i=b("th"),c=j(r),o=V(),z&&z.c(),u=V(),d=b("th"),_=j(f),p=V(),H&&H.c(),D=V(),E=b("th"),T=j(w),F=V(),q&&q.c(),L=V(),k=b("th"),S=j(P),R=V(),Z&&Z.c(),U=V(),B=b("tbody");for(let $=0;$<O.length;$+=1)O[$].c();this.h()},l($){e=v($,"TABLE",{class:!0});var x=C(e);t=v(x,"THEAD",{class:!0});var ie=C(t);n=v(ie,"TR",{});var fe=C(n);s=v(fe,"TH",{class:!0}),C(s).forEach(m),a=A(fe),i=v(fe,"TH",{class:!0});var De=C(i);c=G(De,r),o=A(De),z&&z.l(De),De.forEach(m),u=A(fe),d=v(fe,"TH",{class:!0});var ke=C(d);_=G(ke,f),p=A(ke),H&&H.l(ke),ke.forEach(m),D=A(fe),E=v(fe,"TH",{class:!0});var I=C(E);T=G(I,w),F=A(I),q&&q.l(I),I.forEach(m),L=A(fe),k=v(fe,"TH",{class:!0});var Q=C(k);S=G(Q,P),R=A(Q),Z&&Z.l(Q),Q.forEach(m),fe.forEach(m),ie.forEach(m),U=A(x),B=v(x,"TBODY",{});var oe=C(B);for(let de=0;de<O.length;de+=1)O[de].l(oe);oe.forEach(m),x.forEach(m),this.h()},h(){g(s,"class","col-indicator"),g(i,"class","sortable"),g(d,"class","sortable"),g(E,"class","sortable"),g(k,"class","sortable"),g(t,"class","file-list-header"),g(e,"class","file-list")},m($,x){M($,e,x),h(e,t),h(t,n),h(n,s),h(n,a),h(n,i),h(i,c),h(i,o),z&&z.m(i,null),h(n,u),h(n,d),h(d,_),h(d,p),H&&H.m(d,null),h(n,D),h(n,E),h(E,T),h(E,F),q&&q.m(E,null),h(n,L),h(n,k),h(k,S),h(k,R),Z&&Z.m(k,null),h(e,U),h(e,B);for(let ie=0;ie<O.length;ie+=1)O[ie]&&O[ie].m(B,null);N=!0,y||(K=[X(i,"click",l[14]),X(d,"click",l[15]),X(E,"click",l[16]),X(k,"click",l[17])],y=!0)},p($,x){(!N||x[0]&128)&&r!==(r=$[7]("name")+"")&&Y(c,r),$[4]==="name"?z?z.p($,x):(z=pt($),z.c(),z.m(i,null)):z&&(z.d(1),z=null),(!N||x[0]&128)&&f!==(f=$[7]("created")+"")&&Y(_,f),$[4]==="createdAt"?H?H.p($,x):(H=vt($),H.c(),H.m(d,null)):H&&(H.d(1),H=null),(!N||x[0]&128)&&w!==(w=$[7]("modified")+"")&&Y(T,w),$[4]==="updatedAt"?q?q.p($,x):(q=bt($),q.c(),q.m(E,null)):q&&(q.d(1),q=null),(!N||x[0]&128)&&P!==(P=$[7]("size")+"")&&Y(S,P),$[4]==="fileSize"?Z?Z.p($,x):(Z=gt($),Z.c(),Z.m(k,null)):Z&&(Z.d(1),Z=null),x[0]&6985&&(le=Ve($[6]),Pe(),O=at(O,x,ue,1,$,le,J,B,st,wt,null,_t),Ae())},i($){if(!N){for(let x=0;x<le.length;x+=1)ee(O[x]);N=!0}},o($){for(let x=0;x<O.length;x+=1)te(O[x]);N=!1},d($){$&&m(e),z&&z.d(),H&&H.d(),q&&q.d(),Z&&Z.d();for(let x=0;x<O.length;x+=1)O[x].d();y=!1,ge(K)}}}function yl(l){let e,t,n="folder_open",s,a,i=l[7]("emptyFolder")+"",r,c,o,u=l[7]("uploadGetStarted")+"",d;return{c(){e=b("div"),t=b("span"),t.textContent=n,s=V(),a=b("h3"),r=j(i),c=V(),o=b("p"),d=j(u),this.h()},l(f){e=v(f,"DIV",{class:!0});var _=C(e);t=v(_,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-10h1vwd"&&(t.textContent=n),s=A(_),a=v(_,"H3",{});var p=C(a);r=G(p,i),p.forEach(m),c=A(_),o=v(_,"P",{});var D=C(o);d=G(D,u),D.forEach(m),_.forEach(m),this.h()},h(){g(t,"class","material-symbols-outlined empty-icon"),g(e,"class","empty-state")},m(f,_){M(f,e,_),h(e,t),h(e,s),h(e,a),h(a,r),h(e,c),h(e,o),h(o,d)},p(f,_){_[0]&128&&i!==(i=f[7]("emptyFolder")+"")&&Y(r,i),_[0]&128&&u!==(u=f[7]("uploadGetStarted")+"")&&Y(d,u)},i:we,o:we,d(f){f&&m(e)}}}function Tl(l){let e,t=Ve(Array(10)),n=[];for(let s=0;s<t.length;s+=1)n[s]=El(wl(l,t,s));return{c(){e=b("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=v(s,"DIV",{class:!0});var a=C(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(m),this.h()},h(){g(e,"class","skeleton-loader")},m(s,a){M(s,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p:we,i:we,o:we,d(s){s&&m(e),lt(n,s)}}}function pt(l){let e,t=l[5]==="asc"?"arrow_upward":"arrow_downward",n;return{c(){e=b("span"),n=j(t),this.h()},l(s){e=v(s,"SPAN",{class:!0});var a=C(e);n=G(a,t),a.forEach(m),this.h()},h(){g(e,"class","sort-icon material-symbols-outlined")},m(s,a){M(s,e,a),h(e,n)},p(s,a){a[0]&32&&t!==(t=s[5]==="asc"?"arrow_upward":"arrow_downward")&&Y(n,t)},d(s){s&&m(e)}}}function vt(l){let e,t=l[5]==="asc"?"arrow_upward":"arrow_downward",n;return{c(){e=b("span"),n=j(t),this.h()},l(s){e=v(s,"SPAN",{class:!0});var a=C(e);n=G(a,t),a.forEach(m),this.h()},h(){g(e,"class","sort-icon material-symbols-outlined")},m(s,a){M(s,e,a),h(e,n)},p(s,a){a[0]&32&&t!==(t=s[5]==="asc"?"arrow_upward":"arrow_downward")&&Y(n,t)},d(s){s&&m(e)}}}function bt(l){let e,t=l[5]==="asc"?"arrow_upward":"arrow_downward",n;return{c(){e=b("span"),n=j(t),this.h()},l(s){e=v(s,"SPAN",{class:!0});var a=C(e);n=G(a,t),a.forEach(m),this.h()},h(){g(e,"class","sort-icon material-symbols-outlined")},m(s,a){M(s,e,a),h(e,n)},p(s,a){a[0]&32&&t!==(t=s[5]==="asc"?"arrow_upward":"arrow_downward")&&Y(n,t)},d(s){s&&m(e)}}}function gt(l){let e,t=l[5]==="asc"?"arrow_upward":"arrow_downward",n;return{c(){e=b("span"),n=j(t),this.h()},l(s){e=v(s,"SPAN",{class:!0});var a=C(e);n=G(a,t),a.forEach(m),this.h()},h(){g(e,"class","sort-icon material-symbols-outlined")},m(s,a){M(s,e,a),h(e,n)},p(s,a){a[0]&32&&t!==(t=s[5]==="asc"?"arrow_upward":"arrow_downward")&&Y(n,t)},d(s){s&&m(e)}}}function wt(l,e){let t,n,s;function a(...o){return e[18](e[30],...o)}function i(){return e[19](e[30])}function r(...o){return e[20](e[30],...o)}function c(...o){return e[21](e[30],...o)}return n=new gl({props:{item:e[30],selected:e[0].has(e[30].id),isTrashView:e[3]}}),n.$on("click",a),n.$on("dblclick",i),n.$on("dragstart",r),n.$on("drop",c),n.$on("contextmenu",e[22]),{key:l,first:null,c(){t=Ce(),ve(n.$$.fragment),this.h()},l(o){t=Ce(),pe(n.$$.fragment,o),this.h()},h(){this.first=t},m(o,u){M(o,t,u),_e(n,o,u),s=!0},p(o,u){e=o;const d={};u[0]&64&&(d.item=e[30]),u[0]&65&&(d.selected=e[0].has(e[30].id)),u[0]&8&&(d.isTrashView=e[3]),n.$set(d)},i(o){s||(ee(n.$$.fragment,o),s=!0)},o(o){te(n.$$.fragment,o),s=!1},d(o){o&&m(t),me(n,o)}}}function El(l){let e,t='<div class="skeleton-icon"></div> <div class="skeleton-text skeleton-name"></div> <div class="skeleton-text skeleton-date"></div> <div class="skeleton-text skeleton-date"></div> <div class="skeleton-text skeleton-size"></div> ';return{c(){e=b("div"),e.innerHTML=t,this.h()},l(n){e=v(n,"DIV",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-efx0qk"&&(e.innerHTML=t),this.h()},h(){g(e,"class","skeleton-row")},m(n,s){M(n,e,s)},p:we,d(n){n&&m(e)}}}function Sl(l){let e,t,n,s,a,i;const r=[Tl,yl,kl],c=[];function o(u,d){return u[2]?0:u[1].length===0?1:2}return t=o(l),n=c[t]=r[t](l),{c(){e=b("div"),n.c(),this.h()},l(u){e=v(u,"DIV",{class:!0});var d=C(e);n.l(d),d.forEach(m),this.h()},h(){g(e,"class","file-container"),ae(e,"dragover",!1)},m(u,d){M(u,e,d),c[t].m(e,null),s=!0,a||(i=X(window,"keydown",l[13]),a=!0)},p(u,d){let f=t;t=o(u),t===f?c[t].p(u,d):(Pe(),te(c[f],1,1,()=>{c[f]=null}),Ae(),n=c[t],n?n.p(u,d):(n=c[t]=r[t](u),n.c()),ee(n,1),n.m(e,null))},i(u){s||(ee(n),s=!0)},o(u){te(n),s=!1},d(u){u&&m(e),c[t].d(),a=!1,i()}}}function Cl(l,e,t){let n,s;be(l,He,y=>t(7,s=y));let{files:a=[]}=e,{isLoading:i=!1}=e,{isTrashView:r=!1}=e,{selectedItems:c=new Set}=e;const o=Ne();let u="name",d="asc",f=new Set;function _(y,K){K.ctrlKey||K.metaKey?p(y.id):K.shiftKey&&c.size>0?D(y.id):t(0,c=new Set([y.id])),o("itemsSelected",c)}function p(y){c.has(y)?c.delete(y):c.add(y),t(0,c)}function D(y){const K=Array.from(c)[c.size-1],z=a.findIndex(le=>le.id===K),H=a.findIndex(le=>le.id===y),[q,Z]=[Math.min(z,H),Math.max(z,H)];for(let le=q;le<=Z;le++)c.add(a[le].id);t(0,c)}function E(y){y.type==="folder"&&!r?o("folderOpen",y):y.type==="file"&&o("download",y)}function w(y){u===y?t(5,d=d==="asc"?"desc":"asc"):(t(4,u=y),t(5,d="asc"))}function T(y,K){c.has(y.id)||t(0,c=new Set([y.id])),f=new Set(c),K.dataTransfer.effectAllowed="move",K.dataTransfer.setData("text/plain",JSON.stringify(Array.from(f)))}function F(y,K){if(K.preventDefault(),y.type!=="folder")return;const z=JSON.parse(K.dataTransfer.getData("text/plain"));z.includes(y.id)||o("move",{itemIds:z,targetFolderId:y.id})}function L(y){y.key==="a"&&(y.ctrlKey||y.metaKey)?(y.preventDefault(),t(0,c=new Set(a.map(K=>K.id))),o("itemsSelected",c)):y.key==="Delete"&&c.size>0?(y.preventDefault(),o("delete",Array.from(c))):y.key==="Escape"&&(t(0,c=new Set),o("itemsSelected",c))}const k=()=>w("name"),P=()=>w("createdAt"),S=()=>w("updatedAt"),R=()=>w("fileSize"),U=(y,K)=>_(y,K.detail),B=y=>E(y),O=(y,K)=>T(y,K.detail),J=(y,K)=>F(y,K.detail);function N(y){Jt.call(this,l,y)}return l.$$set=y=>{"files"in y&&t(1,a=y.files),"isLoading"in y&&t(2,i=y.isLoading),"isTrashView"in y&&t(3,r=y.isTrashView),"selectedItems"in y&&t(0,c=y.selectedItems)},l.$$.update=()=>{l.$$.dirty[0]&50&&t(6,n=[...a].sort((y,K)=>{let z=y[u],H=K[u];return u==="name"&&(z=z==null?void 0:z.toLowerCase(),H=H==null?void 0:H.toLowerCase()),z<H?d==="asc"?-1:1:z>H?d==="asc"?1:-1:0}))},[c,a,i,r,u,d,n,s,_,E,w,T,F,L,k,P,S,R,U,B,O,J,N]}class Dl extends Te{constructor(e){super(),Ee(this,e,Cl,Sl,ye,{files:1,isLoading:2,isTrashView:3,selectedItems:0},null,[-1,-1])}}function it(l){const e=l-1;return e*e*e+1}function et(l,{delay:e=0,duration:t=400,easing:n=Zt}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:a=>`opacity: ${a*s}`}}function kt(l,{delay:e=0,duration:t=400,easing:n=it,x:s=0,y:a=0,opacity:i=0}={}){const r=getComputedStyle(l),c=+r.opacity,o=r.transform==="none"?"":r.transform,u=c*(1-i),[d,f]=rt(s),[_,p]=rt(a);return{delay:e,duration:t,easing:n,css:(D,E)=>`
			transform: ${o} translate(${(1-D)*d}${f}, ${(1-D)*_}${p});
			opacity: ${c-u*E}`}}function ze(l,{delay:e=0,duration:t=400,easing:n=it,axis:s="y"}={}){const a=getComputedStyle(l),i=+a.opacity,r=s==="y"?"height":"width",c=parseFloat(a[r]),o=s==="y"?["top","bottom"]:["left","right"],u=o.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),d=parseFloat(a[`padding${u[0]}`]),f=parseFloat(a[`padding${u[1]}`]),_=parseFloat(a[`margin${u[0]}`]),p=parseFloat(a[`margin${u[1]}`]),D=parseFloat(a[`border${u[0]}Width`]),E=parseFloat(a[`border${u[1]}Width`]);return{delay:e,duration:t,easing:n,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*i};${r}: ${w*c}px;padding-${o[0]}: ${w*d}px;padding-${o[1]}: ${w*f}px;margin-${o[0]}: ${w*_}px;margin-${o[1]}: ${w*p}px;border-${o[0]}-width: ${w*D}px;border-${o[1]}-width: ${w*E}px;`}}function yt(l,{delay:e=0,duration:t=400,easing:n=it,start:s=0,opacity:a=0}={}){const i=getComputedStyle(l),r=+i.opacity,c=i.transform==="none"?"":i.transform,o=1-s,u=r*(1-a);return{delay:e,duration:t,easing:n,css:(d,f)=>`
			transform: ${c} scale(${1-o*f});
			opacity: ${r-u*f}
		`}}function Tt(l){let e,t,n,s,a,i,r,c=!l[1]&&Et(l),o=l[1]&&St(l),u=l[5]&&Ct(l),d=l[4]&&Dt(l);return{c(){e=b("div"),t=b("div"),c&&c.c(),n=V(),o&&o.c(),s=V(),u&&u.c(),a=V(),d&&d.c(),this.h()},l(f){e=v(f,"DIV",{class:!0});var _=C(e);t=v(_,"DIV",{class:!0});var p=C(t);c&&c.l(p),n=A(p),o&&o.l(p),s=A(p),u&&u.l(p),a=A(p),d&&d.l(p),p.forEach(m),_.forEach(m),this.h()},h(){g(t,"class","toolbar-left"),g(e,"class","toolbar"),ae(e,"visible",l[2])},m(f,_){M(f,e,_),h(e,t),c&&c.m(t,null),h(t,n),o&&o.m(t,null),h(t,s),u&&u.m(t,null),h(t,a),d&&d.m(t,null),r=!0},p(f,_){f[1]?c&&(c.d(1),c=null):c?c.p(f,_):(c=Et(f),c.c(),c.m(t,n)),f[1]?o?o.p(f,_):(o=St(f),o.c(),o.m(t,s)):o&&(o.d(1),o=null),f[5]?u?(u.p(f,_),_&32&&ee(u,1)):(u=Ct(f),u.c(),ee(u,1),u.m(t,a)):u&&(Pe(),te(u,1,1,()=>{u=null}),Ae()),f[4]?d?(d.p(f,_),_&16&&ee(d,1)):(d=Dt(f),d.c(),ee(d,1),d.m(t,null)):d&&(Pe(),te(d,1,1,()=>{d=null}),Ae()),(!r||_&4)&&ae(e,"visible",f[2])},i(f){r||(ee(u),ee(d),f&&Be(()=>{r&&(i||(i=he(e,ze,{duration:200},!0)),i.run(1))}),r=!0)},o(f){te(u),te(d),f&&(i||(i=he(e,ze,{duration:200},!1)),i.run(0)),r=!1},d(f){f&&m(e),c&&c.d(),o&&o.d(),u&&u.d(),d&&d.d(),f&&i&&i.end()}}}function Et(l){let e,t,n="create_new_folder",s,a,i=l[6]("newFolder")+"",r,c,o;return{c(){e=b("button"),t=b("span"),t.textContent=n,s=V(),a=b("span"),r=j(i),this.h()},l(u){e=v(u,"BUTTON",{class:!0,id:!0});var d=C(e);t=v(d,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1yrk8lh"&&(t.textContent=n),s=A(d),a=v(d,"SPAN",{});var f=C(a);r=G(f,i),f.forEach(m),d.forEach(m),this.h()},h(){g(t,"class","material-symbols-outlined"),g(e,"class","toolbar-btn"),g(e,"id","newFolderBtn")},m(u,d){M(u,e,d),h(e,t),h(e,s),h(e,a),h(a,r),c||(o=X(e,"click",l[8]),c=!0)},p(u,d){d&64&&i!==(i=u[6]("newFolder")+"")&&Y(r,i)},d(u){u&&m(e),c=!1,o()}}}function St(l){let e,t,n="delete_sweep",s,a,i=l[6]("deleteAllForever")+"",r,c,o;return{c(){e=b("button"),t=b("span"),t.textContent=n,s=V(),a=b("span"),r=j(i),this.h()},l(u){e=v(u,"BUTTON",{class:!0,id:!0});var d=C(e);t=v(d,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-mhtuwv"&&(t.textContent=n),s=A(d),a=v(d,"SPAN",{});var f=C(a);r=G(f,i),f.forEach(m),d.forEach(m),this.h()},h(){g(t,"class","material-symbols-outlined"),g(e,"class","toolbar-btn toolbar-btn-danger"),g(e,"id","emptyTrashBtn")},m(u,d){M(u,e,d),h(e,t),h(e,s),h(e,a),h(a,r),c||(o=X(e,"click",l[9]),c=!0)},p(u,d){d&64&&i!==(i=u[6]("deleteAllForever")+"")&&Y(r,i)},d(u){u&&m(e),c=!1,o()}}}function Ct(l){let e,t,n='<span class="material-symbols-outlined">close</span>',s,a,i,r="download",c,o,u=l[6]("download")+"",d,f,_,p,D="drive_file_move",E,w,T=l[6]("move")+"",F,L,k,P,S="edit",R,U,B=l[6]("rename")+"",O,J,N,y,K,z="delete",H,q,Z=l[6]("delete")+"",le,ue,$,x,ie,fe,De,ke=l[6]("selected")+"",I,Q,oe,de,Re;return{c(){e=b("div"),t=b("button"),t.innerHTML=n,s=V(),a=b("button"),i=b("span"),i.textContent=r,c=V(),o=b("span"),d=j(u),f=V(),_=b("button"),p=b("span"),p.textContent=D,E=V(),w=b("span"),F=j(T),L=V(),k=b("button"),P=b("span"),P.textContent=S,R=V(),U=b("span"),O=j(B),N=V(),y=b("button"),K=b("span"),K.textContent=z,H=V(),q=b("span"),le=j(Z),ue=V(),$=b("div"),x=V(),ie=b("span"),fe=j(l[0]),De=V(),I=j(ke),this.h()},l(re){e=v(re,"DIV",{class:!0});var ne=C(e);t=v(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-f1ccuo"&&(t.innerHTML=n),s=A(ne),a=v(ne,"BUTTON",{class:!0});var Me=C(a);i=v(Me,"SPAN",{class:!0,"data-svelte-h":!0}),se(i)!=="svelte-yi50h3"&&(i.textContent=r),c=A(Me),o=v(Me,"SPAN",{});var Fe=C(o);d=G(Fe,u),Fe.forEach(m),Me.forEach(m),f=A(ne),_=v(ne,"BUTTON",{class:!0});var Oe=C(_);p=v(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),se(p)!=="svelte-xnqhu4"&&(p.textContent=D),E=A(Oe),w=v(Oe,"SPAN",{});var W=C(w);F=G(W,T),W.forEach(m),Oe.forEach(m),L=A(ne),k=v(ne,"BUTTON",{class:!0});var ce=C(k);P=v(ce,"SPAN",{class:!0,"data-svelte-h":!0}),se(P)!=="svelte-4hi8s3"&&(P.textContent=S),R=A(ce),U=v(ce,"SPAN",{});var Ie=C(U);O=G(Ie,B),Ie.forEach(m),ce.forEach(m),N=A(ne),y=v(ne,"BUTTON",{class:!0});var Je=C(y);K=v(Je,"SPAN",{class:!0,"data-svelte-h":!0}),se(K)!=="svelte-1v24jz4"&&(K.textContent=z),H=A(Je),q=v(Je,"SPAN",{});var Ye=C(q);le=G(Ye,Z),Ye.forEach(m),Je.forEach(m),ue=A(ne),$=v(ne,"DIV",{class:!0}),C($).forEach(m),x=A(ne),ie=v(ne,"SPAN",{class:!0});var We=C(ie);fe=G(We,l[0]),De=A(We),I=G(We,ke),We.forEach(m),ne.forEach(m),this.h()},h(){g(t,"class","toolbar-btn icon-btn toolbar-close-btn"),g(i,"class","material-symbols-outlined"),g(a,"class","toolbar-btn"),g(p,"class","material-symbols-outlined"),g(_,"class","toolbar-btn"),g(P,"class","material-symbols-outlined"),g(k,"class","toolbar-btn"),k.disabled=J=!l[3],g(K,"class","material-symbols-outlined"),g(y,"class","toolbar-btn toolbar-btn-danger"),g($,"class","toolbar-divider"),g(ie,"class","toolbar-selection-count"),g(e,"class","toolbar-actions")},m(re,ne){M(re,e,ne),h(e,t),h(e,s),h(e,a),h(a,i),h(a,c),h(a,o),h(o,d),h(e,f),h(e,_),h(_,p),h(_,E),h(_,w),h(w,F),h(e,L),h(e,k),h(k,P),h(k,R),h(k,U),h(U,O),h(e,N),h(e,y),h(y,K),h(y,H),h(y,q),h(q,le),h(e,ue),h(e,$),h(e,x),h(e,ie),h(ie,fe),h(ie,De),h(ie,I),oe=!0,de||(Re=[X(t,"click",l[10]),X(a,"click",l[11]),X(_,"click",l[12]),X(k,"click",l[13]),X(y,"click",l[14])],de=!0)},p(re,ne){(!oe||ne&64)&&u!==(u=re[6]("download")+"")&&Y(d,u),(!oe||ne&64)&&T!==(T=re[6]("move")+"")&&Y(F,T),(!oe||ne&64)&&B!==(B=re[6]("rename")+"")&&Y(O,B),(!oe||ne&8&&J!==(J=!re[3]))&&(k.disabled=J),(!oe||ne&64)&&Z!==(Z=re[6]("delete")+"")&&Y(le,Z),(!oe||ne&1)&&Y(fe,re[0]),(!oe||ne&64)&&ke!==(ke=re[6]("selected")+"")&&Y(I,ke)},i(re){oe||(re&&Be(()=>{oe&&(Q||(Q=he(e,ze,{duration:200,axis:"x"},!0)),Q.run(1))}),oe=!0)},o(re){re&&(Q||(Q=he(e,ze,{duration:200,axis:"x"},!1)),Q.run(0)),oe=!1},d(re){re&&m(e),re&&Q&&Q.end(),de=!1,ge(Re)}}}function Dt(l){let e,t,n='<span class="material-symbols-outlined">close</span>',s,a,i,r="restore_from_trash",c,o,u=l[6]("restore")+"",d,f,_,p,D="delete_forever",E,w,T=l[6]("deletePermanently")+"",F,L,k,P,S,R,U,B=l[6]("selected")+"",O,J,N,y,K;return{c(){e=b("div"),t=b("button"),t.innerHTML=n,s=V(),a=b("button"),i=b("span"),i.textContent=r,c=V(),o=b("span"),d=j(u),f=V(),_=b("button"),p=b("span"),p.textContent=D,E=V(),w=b("span"),F=j(T),L=V(),k=b("div"),P=V(),S=b("span"),R=j(l[0]),U=V(),O=j(B),this.h()},l(z){e=v(z,"DIV",{class:!0});var H=C(e);t=v(H,"BUTTON",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-f1ccuo"&&(t.innerHTML=n),s=A(H),a=v(H,"BUTTON",{class:!0});var q=C(a);i=v(q,"SPAN",{class:!0,"data-svelte-h":!0}),se(i)!=="svelte-ytbc01"&&(i.textContent=r),c=A(q),o=v(q,"SPAN",{});var Z=C(o);d=G(Z,u),Z.forEach(m),q.forEach(m),f=A(H),_=v(H,"BUTTON",{class:!0});var le=C(_);p=v(le,"SPAN",{class:!0,"data-svelte-h":!0}),se(p)!=="svelte-1mnli2o"&&(p.textContent=D),E=A(le),w=v(le,"SPAN",{});var ue=C(w);F=G(ue,T),ue.forEach(m),le.forEach(m),L=A(H),k=v(H,"DIV",{class:!0}),C(k).forEach(m),P=A(H),S=v(H,"SPAN",{class:!0});var $=C(S);R=G($,l[0]),U=A($),O=G($,B),$.forEach(m),H.forEach(m),this.h()},h(){g(t,"class","toolbar-btn icon-btn toolbar-close-btn"),g(i,"class","material-symbols-outlined"),g(a,"class","toolbar-btn"),g(p,"class","material-symbols-outlined"),g(_,"class","toolbar-btn toolbar-btn-danger"),g(k,"class","toolbar-divider"),g(S,"class","toolbar-selection-count"),g(e,"class","toolbar-actions-trash")},m(z,H){M(z,e,H),h(e,t),h(e,s),h(e,a),h(a,i),h(a,c),h(a,o),h(o,d),h(e,f),h(e,_),h(_,p),h(_,E),h(_,w),h(w,F),h(e,L),h(e,k),h(e,P),h(e,S),h(S,R),h(S,U),h(S,O),N=!0,y||(K=[X(t,"click",l[15]),X(a,"click",l[16]),X(_,"click",l[17])],y=!0)},p(z,H){(!N||H&64)&&u!==(u=z[6]("restore")+"")&&Y(d,u),(!N||H&64)&&T!==(T=z[6]("deletePermanently")+"")&&Y(F,T),(!N||H&1)&&Y(R,z[0]),(!N||H&64)&&B!==(B=z[6]("selected")+"")&&Y(O,B)},i(z){N||(z&&Be(()=>{N&&(J||(J=he(e,ze,{duration:200,axis:"x"},!0)),J.run(1))}),N=!0)},o(z){z&&(J||(J=he(e,ze,{duration:200,axis:"x"},!1)),J.run(0)),N=!1},d(z){z&&m(e),z&&J&&J.end(),y=!1,ge(K)}}}function Il(l){let e,t=l[2]&&Tt(l);return{c(){t&&t.c(),e=Ce()},l(n){t&&t.l(n),e=Ce()},m(n,s){t&&t.m(n,s),M(n,e,s)},p(n,[s]){n[2]?t?(t.p(n,s),s&4&&ee(t,1)):(t=Tt(n),t.c(),ee(t,1),t.m(e.parentNode,e)):t&&(Pe(),te(t,1,1,()=>{t=null}),Ae())},i(n){ee(t)},o(n){te(t)},d(n){n&&m(e),t&&t.d(n)}}}function Nl(l,e,t){let n,s,a,i;be(l,He,k=>t(6,i=k));let{selectedCount:r=0}=e,{isTrashView:c=!1}=e,{visible:o=!0}=e;const u=Ne(),d=()=>u("newFolder"),f=()=>u("emptyTrash"),_=()=>u("clearSelection"),p=()=>u("download"),D=()=>u("move"),E=()=>u("rename"),w=()=>u("delete"),T=()=>u("clearSelection"),F=()=>u("restore"),L=()=>u("deletePermanently");return l.$$set=k=>{"selectedCount"in k&&t(0,r=k.selectedCount),"isTrashView"in k&&t(1,c=k.isTrashView),"visible"in k&&t(2,o=k.visible)},l.$$.update=()=>{l.$$.dirty&3&&t(5,n=r>0&&!c),l.$$.dirty&3&&t(4,s=r>0&&c),l.$$.dirty&1&&t(3,a=r===1)},[r,c,o,a,s,n,i,u,d,f,_,p,D,E,w,T,F,L]}class Pl extends Te{constructor(e){super(),Ee(this,e,Nl,Il,ye,{selectedCount:0,isTrashView:1,visible:2})}}function It(l,e,t){const n=l.slice();return n[12]=e[t],n[14]=t,n}function Al(l){let e,t=l[2]("myDrive")+"",n,s,a,i,r,c=Ve(l[0]),o=[];for(let u=0;u<c.length;u+=1)o[u]=Nt(It(l,c,u));return{c(){e=b("button"),n=j(t),s=V();for(let u=0;u<o.length;u+=1)o[u].c();a=Ce(),this.h()},l(u){e=v(u,"BUTTON",{class:!0});var d=C(e);n=G(d,t),d.forEach(m),s=A(u);for(let f=0;f<o.length;f+=1)o[f].l(u);a=Ce(),this.h()},h(){g(e,"class","breadcrumb"),ae(e,"current",l[0].length===0)},m(u,d){M(u,e,d),h(e,n),M(u,s,d);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(u,d);M(u,a,d),i||(r=[X(e,"click",l[5]),X(e,"dragover",l[6]),X(e,"dragleave",Xt),X(e,"drop",l[7])],i=!0)},p(u,d){if(d&4&&t!==(t=u[2]("myDrive")+"")&&Y(n,t),d&1&&ae(e,"current",u[0].length===0),d&25){c=Ve(u[0]);let f;for(f=0;f<c.length;f+=1){const _=It(u,c,f);o[f]?o[f].p(_,d):(o[f]=Nt(_),o[f].c(),o[f].m(a.parentNode,a))}for(;f<o.length;f+=1)o[f].d(1);o.length=c.length}},d(u){u&&(m(e),m(s),m(a)),lt(o,u),i=!1,ge(r)}}}function Vl(l){let e,t=l[2]("trash")+"",n;return{c(){e=b("span"),n=j(t),this.h()},l(s){e=v(s,"SPAN",{class:!0});var a=C(e);n=G(a,t),a.forEach(m),this.h()},h(){g(e,"class","breadcrumb current")},m(s,a){M(s,e,a),h(e,n)},p(s,a){a&4&&t!==(t=s[2]("trash")+"")&&Y(n,t)},d(s){s&&m(e)}}}function Nt(l){let e,t=">",n,s,a=l[12].name+"",i,r,c,o;function u(){return l[8](l[14])}function d(..._){return l[9](l[14],..._)}function f(..._){return l[10](l[14],..._)}return{c(){e=b("span"),e.textContent=t,n=V(),s=b("button"),i=j(a),r=V(),this.h()},l(_){e=v(_,"SPAN",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-128r0vm"&&(e.textContent=t),n=A(_),s=v(_,"BUTTON",{class:!0});var p=C(s);i=G(p,a),r=A(p),p.forEach(m),this.h()},h(){g(e,"class","breadcrumb-separator"),g(s,"class","breadcrumb"),ae(s,"current",l[14]===l[0].length-1)},m(_,p){M(_,e,p),M(_,n,p),M(_,s,p),h(s,i),h(s,r),c||(o=[X(s,"click",u),X(s,"dragover",d),X(s,"dragleave",Xt),X(s,"drop",f)],c=!0)},p(_,p){l=_,p&1&&a!==(a=l[12].name+"")&&Y(i,a),p&1&&ae(s,"current",l[14]===l[0].length-1)},d(_){_&&(m(e),m(n),m(s)),c=!1,ge(o)}}}function Fl(l){let e;function t(a,i){return a[1]?Vl:Al}let n=t(l),s=n(l);return{c(){e=b("div"),s.c(),this.h()},l(a){e=v(a,"DIV",{class:!0,id:!0});var i=C(e);s.l(i),i.forEach(m),this.h()},h(){g(e,"class","breadcrumbs"),g(e,"id","breadcrumbs")},m(a,i){M(a,e,i),s.m(e,null)},p(a,[i]){n===(n=t(a))&&s?s.p(a,i):(s.d(1),s=n(a),s&&(s.c(),s.m(e,null)))},i:we,o:we,d(a){a&&m(e),s.d()}}}function Pt(l,e){l.preventDefault(),l.currentTarget.classList.add("drag-over-breadcrumb")}function Xt(l){l.currentTarget.classList.remove("drag-over-breadcrumb")}function Ul(l,e,t){let n;be(l,He,D=>t(2,n=D));let{path:s=[]}=e,{isTrashView:a=!1}=e;const i=Ne();function r(D){i("navigate",D)}function c(D,E){D.preventDefault(),D.currentTarget.classList.remove("drag-over-breadcrumb");const w=JSON.parse(D.dataTransfer.getData("text/plain")),T=E===-1?null:s[E].id;i("move",{itemIds:w,targetFolderId:T})}const o=()=>r(-1),u=D=>Pt(D),d=D=>c(D,-1),f=D=>r(D),_=(D,E)=>Pt(E),p=(D,E)=>c(E,D);return l.$$set=D=>{"path"in D&&t(0,s=D.path),"isTrashView"in D&&t(1,a=D.isTrashView)},[s,a,n,r,c,o,u,d,f,_,p]}class Ll extends Te{constructor(e){super(),Ee(this,e,Ul,Fl,ye,{path:0,isTrashView:1})}}const{window:zl}=nl;function At(l){let e,t,n;function s(r,c){return r[4]?Ol:Ml}let a=s(l),i=a(l);return{c(){e=b("div"),i.c(),this.h()},l(r){e=v(r,"DIV",{class:!0,style:!0});var c=C(e);i.l(c),c.forEach(m),this.h()},h(){g(e,"class","context-menu"),Ue(e,"left",l[0]+"px"),Ue(e,"top",l[1]+"px")},m(r,c){M(r,e,c),i.m(e,null),l[17](e),n=!0},p(r,c){a===(a=s(r))&&i?i.p(r,c):(i.d(1),i=a(r),i&&(i.c(),i.m(e,null))),(!n||c&1)&&Ue(e,"left",r[0]+"px"),(!n||c&2)&&Ue(e,"top",r[1]+"px")},i(r){n||(r&&Be(()=>{n&&(t||(t=he(e,et,{duration:150},!0)),t.run(1))}),n=!0)},o(r){r&&(t||(t=he(e,et,{duration:150},!1)),t.run(0)),n=!1},d(r){r&&m(e),i.d(),l[17](null),r&&t&&t.end()}}}function Ml(l){let e,t,n,s,a,i="edit",r,c,o=l[6]("rename")+"",u,d,f,_,p="drive_file_move",D,E,w=l[6]("move")+"",T,F,L,k,P,S,R="delete",U,B,O=l[6]("delete")+"",J,N,y;function K(q,Z){return q[3].type==="file"?Hl:Bl}let z=K(l),H=z(l);return{c(){H.c(),e=V(),t=b("div"),n=V(),s=b("div"),a=b("span"),a.textContent=i,r=V(),c=b("span"),u=j(o),d=V(),f=b("div"),_=b("span"),_.textContent=p,D=V(),E=b("span"),T=j(w),F=V(),L=b("div"),k=V(),P=b("div"),S=b("span"),S.textContent=R,U=V(),B=b("span"),J=j(O),this.h()},l(q){H.l(q),e=A(q),t=v(q,"DIV",{class:!0}),C(t).forEach(m),n=A(q),s=v(q,"DIV",{class:!0});var Z=C(s);a=v(Z,"SPAN",{class:!0,"data-svelte-h":!0}),se(a)!=="svelte-4hi8s3"&&(a.textContent=i),r=A(Z),c=v(Z,"SPAN",{});var le=C(c);u=G(le,o),le.forEach(m),Z.forEach(m),d=A(q),f=v(q,"DIV",{class:!0});var ue=C(f);_=v(ue,"SPAN",{class:!0,"data-svelte-h":!0}),se(_)!=="svelte-xnqhu4"&&(_.textContent=p),D=A(ue),E=v(ue,"SPAN",{});var $=C(E);T=G($,w),$.forEach(m),ue.forEach(m),F=A(q),L=v(q,"DIV",{class:!0}),C(L).forEach(m),k=A(q),P=v(q,"DIV",{class:!0});var x=C(P);S=v(x,"SPAN",{class:!0,"data-svelte-h":!0}),se(S)!=="svelte-1v24jz4"&&(S.textContent=R),U=A(x),B=v(x,"SPAN",{});var ie=C(B);J=G(ie,O),ie.forEach(m),x.forEach(m),this.h()},h(){g(t,"class","context-menu-separator"),g(a,"class","material-symbols-outlined"),g(s,"class","context-menu-item"),g(_,"class","material-symbols-outlined"),g(f,"class","context-menu-item"),g(L,"class","context-menu-separator"),g(S,"class","material-symbols-outlined"),g(P,"class","context-menu-item danger")},m(q,Z){H.m(q,Z),M(q,e,Z),M(q,t,Z),M(q,n,Z),M(q,s,Z),h(s,a),h(s,r),h(s,c),h(c,u),M(q,d,Z),M(q,f,Z),h(f,_),h(f,D),h(f,E),h(E,T),M(q,F,Z),M(q,L,Z),M(q,k,Z),M(q,P,Z),h(P,S),h(P,U),h(P,B),h(B,J),N||(y=[X(s,"click",l[14]),X(f,"click",l[15]),X(P,"click",l[16])],N=!0)},p(q,Z){z===(z=K(q))&&H?H.p(q,Z):(H.d(1),H=z(q),H&&(H.c(),H.m(e.parentNode,e))),Z&64&&o!==(o=q[6]("rename")+"")&&Y(u,o),Z&64&&w!==(w=q[6]("move")+"")&&Y(T,w),Z&64&&O!==(O=q[6]("delete")+"")&&Y(J,O)},d(q){q&&(m(e),m(t),m(n),m(s),m(d),m(f),m(F),m(L),m(k),m(P)),H.d(q),N=!1,ge(y)}}}function Ol(l){let e,t,n="restore_from_trash",s,a,i=l[6]("restore")+"",r,c,o,u,d,f,_="delete_forever",p,D,E=l[6]("deletePermanently")+"",w,T,F;return{c(){e=b("div"),t=b("span"),t.textContent=n,s=V(),a=b("span"),r=j(i),c=V(),o=b("div"),u=V(),d=b("div"),f=b("span"),f.textContent=_,p=V(),D=b("span"),w=j(E),this.h()},l(L){e=v(L,"DIV",{class:!0});var k=C(e);t=v(k,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-ytbc01"&&(t.textContent=n),s=A(k),a=v(k,"SPAN",{});var P=C(a);r=G(P,i),P.forEach(m),k.forEach(m),c=A(L),o=v(L,"DIV",{class:!0}),C(o).forEach(m),u=A(L),d=v(L,"DIV",{class:!0});var S=C(d);f=v(S,"SPAN",{class:!0,"data-svelte-h":!0}),se(f)!=="svelte-1mnli2o"&&(f.textContent=_),p=A(S),D=v(S,"SPAN",{});var R=C(D);w=G(R,E),R.forEach(m),S.forEach(m),this.h()},h(){g(t,"class","material-symbols-outlined"),g(e,"class","context-menu-item"),g(o,"class","context-menu-separator"),g(f,"class","material-symbols-outlined"),g(d,"class","context-menu-item danger")},m(L,k){M(L,e,k),h(e,t),h(e,s),h(e,a),h(a,r),M(L,c,k),M(L,o,k),M(L,u,k),M(L,d,k),h(d,f),h(d,p),h(d,D),h(D,w),T||(F=[X(e,"click",l[10]),X(d,"click",l[11])],T=!0)},p(L,k){k&64&&i!==(i=L[6]("restore")+"")&&Y(r,i),k&64&&E!==(E=L[6]("deletePermanently")+"")&&Y(w,E)},d(L){L&&(m(e),m(c),m(o),m(u),m(d)),T=!1,ge(F)}}}function Bl(l){let e,t,n="download",s,a,i=l[6]("downloadFolder")+"",r,c,o;return{c(){e=b("div"),t=b("span"),t.textContent=n,s=V(),a=b("span"),r=j(i),this.h()},l(u){e=v(u,"DIV",{class:!0});var d=C(e);t=v(d,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-yi50h3"&&(t.textContent=n),s=A(d),a=v(d,"SPAN",{});var f=C(a);r=G(f,i),f.forEach(m),d.forEach(m),this.h()},h(){g(t,"class","material-symbols-outlined"),g(e,"class","context-menu-item")},m(u,d){M(u,e,d),h(e,t),h(e,s),h(e,a),h(a,r),c||(o=X(e,"click",l[13]),c=!0)},p(u,d){d&64&&i!==(i=u[6]("downloadFolder")+"")&&Y(r,i)},d(u){u&&m(e),c=!1,o()}}}function Hl(l){let e,t,n="download",s,a,i=l[6]("downloadFile")+"",r,c,o;return{c(){e=b("div"),t=b("span"),t.textContent=n,s=V(),a=b("span"),r=j(i),this.h()},l(u){e=v(u,"DIV",{class:!0});var d=C(e);t=v(d,"SPAN",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-yi50h3"&&(t.textContent=n),s=A(d),a=v(d,"SPAN",{});var f=C(a);r=G(f,i),f.forEach(m),d.forEach(m),this.h()},h(){g(t,"class","material-symbols-outlined"),g(e,"class","context-menu-item")},m(u,d){M(u,e,d),h(e,t),h(e,s),h(e,a),h(a,r),c||(o=X(e,"click",l[12]),c=!0)},p(u,d){d&64&&i!==(i=u[6]("downloadFile")+"")&&Y(r,i)},d(u){u&&m(e),c=!1,o()}}}function Rl(l){let e,t,n,s=l[2]&&l[3]&&At(l);return{c(){s&&s.c(),e=Ce()},l(a){s&&s.l(a),e=Ce()},m(a,i){s&&s.m(a,i),M(a,e,i),t||(n=X(zl,"scroll",l[9]),t=!0)},p(a,[i]){a[2]&&a[3]?s?(s.p(a,i),i&12&&ee(s,1)):(s=At(a),s.c(),ee(s,1),s.m(e.parentNode,e)):s&&(Pe(),te(s,1,1,()=>{s=null}),Ae())},i(a){ee(s)},o(a){te(s)},d(a){a&&m(e),s&&s.d(a),t=!1,n()}}}function ql(l,e,t){let n;be(l,He,S=>t(6,n=S));let{visible:s=!1}=e,{x:a=0}=e,{y:i=0}=e,{item:r=null}=e,{isTrashView:c=!1}=e;const o=Ne();let u;function d(){const S=u.getBoundingClientRect();S.right>window.innerWidth&&t(0,a=window.innerWidth-S.width-10),S.bottom>window.innerHeight&&t(1,i=window.innerHeight-S.height-10)}function f(S){o("action",S)}function _(S){u&&!u.contains(S.target)&&o("close")}nt(()=>(document.addEventListener("click",_),()=>document.removeEventListener("click",_)));const p=()=>o("close"),D=()=>f("restore"),E=()=>f("delete-permanently"),w=()=>f("download"),T=()=>f("download-folder"),F=()=>f("rename"),L=()=>f("move"),k=()=>f("delete");function P(S){Le[S?"unshift":"push"](()=>{u=S,t(5,u)})}return l.$$set=S=>{"visible"in S&&t(2,s=S.visible),"x"in S&&t(0,a=S.x),"y"in S&&t(1,i=S.y),"item"in S&&t(3,r=S.item),"isTrashView"in S&&t(4,c=S.isTrashView)},l.$$.update=()=>{l.$$.dirty&36&&s&&u&&d()},[a,i,s,r,c,u,n,o,f,p,D,E,w,T,F,L,k,P]}class Jl extends Te{constructor(e){super(),Ee(this,e,ql,Rl,ye,{visible:2,x:0,y:1,item:3,isTrashView:4})}}function Vt(l,e,t){const n=l.slice();return n[9]=e[t],n}function Ft(l){let e,t,n,s=l[3]("uploadingFiles")+"",a,i,r,c,o=l[1]?"expand_less":"expand_more",u,d,f,_,p,D,E,w=!l[1]&&Ut(l);return{c(){e=b("div"),t=b("div"),n=b("h3"),a=j(s),i=V(),r=b("button"),c=b("span"),u=j(o),f=V(),w&&w.c(),this.h()},l(T){e=v(T,"DIV",{class:!0});var F=C(e);t=v(F,"DIV",{class:!0});var L=C(t);n=v(L,"H3",{});var k=C(n);a=G(k,s),k.forEach(m),i=A(L),r=v(L,"BUTTON",{class:!0,"aria-label":!0});var P=C(r);c=v(P,"SPAN",{class:!0});var S=C(c);u=G(S,o),S.forEach(m),P.forEach(m),L.forEach(m),f=A(F),w&&w.l(F),F.forEach(m),this.h()},h(){g(c,"class","material-symbols-outlined"),g(r,"class","upload-minimize-btn"),g(r,"aria-label",d=l[1]?"Expand":"Minimize"),g(t,"class","upload-progress-header"),g(e,"class","upload-progress-container"),ae(e,"visible",l[2]),ae(e,"minimized",l[1])},m(T,F){M(T,e,F),h(e,t),h(t,n),h(n,a),h(t,i),h(t,r),h(r,c),h(c,u),h(e,f),w&&w.m(e,null),p=!0,D||(E=X(r,"click",l[4]),D=!0)},p(T,F){(!p||F&8)&&s!==(s=T[3]("uploadingFiles")+"")&&Y(a,s),(!p||F&2)&&o!==(o=T[1]?"expand_less":"expand_more")&&Y(u,o),(!p||F&2&&d!==(d=T[1]?"Expand":"Minimize"))&&g(r,"aria-label",d),T[1]?w&&(Pe(),te(w,1,1,()=>{w=null}),Ae()):w?(w.p(T,F),F&2&&ee(w,1)):(w=Ut(T),w.c(),ee(w,1),w.m(e,null)),(!p||F&4)&&ae(e,"visible",T[2]),(!p||F&2)&&ae(e,"minimized",T[1])},i(T){p||(ee(w),T&&Be(()=>{p&&(_||(_=he(e,ze,{duration:300},!0)),_.run(1))}),p=!0)},o(T){te(w),T&&(_||(_=he(e,ze,{duration:300},!1)),_.run(0)),p=!1},d(T){T&&m(e),w&&w.d(),T&&_&&_.end(),D=!1,E()}}}function Ut(l){let e,t=[],n=new Map,s,a=Ve(l[0]);const i=r=>r[9].id;for(let r=0;r<a.length;r+=1){let c=Vt(l,a,r),o=i(c);n.set(o,t[r]=zt(o,c))}return{c(){e=b("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var c=C(e);for(let o=0;o<t.length;o+=1)t[o].l(c);c.forEach(m),this.h()},h(){g(e,"class","upload-progress-list")},m(r,c){M(r,e,c);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);s=!0},p(r,c){c&97&&(a=Ve(r[0]),Pe(),t=at(t,c,i,1,r,a,n,e,st,zt,null,Vt),Ae())},i(r){if(!s){for(let c=0;c<a.length;c+=1)ee(t[c]);s=!0}},o(r){for(let c=0;c<t.length;c+=1)te(t[c]);s=!1},d(r){r&&m(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function Kl(l){let e;return{c(){e=j("cancel")},l(t){e=G(t,"cancel")},m(t,n){M(t,e,n)},d(t){t&&m(e)}}}function Wl(l){let e;return{c(){e=j("error")},l(t){e=G(t,"error")},m(t,n){M(t,e,n)},d(t){t&&m(e)}}}function Gl(l){let e;return{c(){e=j("check_circle")},l(t){e=G(t,"check_circle")},m(t,n){M(t,e,n)},d(t){t&&m(e)}}}function jl(l){let e;return{c(){e=j("upload_file")},l(t){e=G(t,"upload_file")},m(t,n){M(t,e,n)},d(t){t&&m(e)}}}function Xl(l){let e=l[6](l[9].status)+"",t;return{c(){t=j(e)},l(n){t=G(n,e)},m(n,s){M(n,t,s)},p(n,s){s&1&&e!==(e=n[6](n[9].status)+"")&&Y(t,e)},d(n){n&&m(t)}}}function Yl(l){let e=Math.round(l[9].progress)+"",t,n,s=Xe(l[9].loaded)+"",a,i,r=Xe(l[9].total)+"",c;return{c(){t=j(e),n=j(`% • 
                                        `),a=j(s),i=j(" / "),c=j(r)},l(o){t=G(o,e),n=G(o,`% • 
                                        `),a=G(o,s),i=G(o," / "),c=G(o,r)},m(o,u){M(o,t,u),M(o,n,u),M(o,a,u),M(o,i,u),M(o,c,u)},p(o,u){u&1&&e!==(e=Math.round(o[9].progress)+"")&&Y(t,e),u&1&&s!==(s=Xe(o[9].loaded)+"")&&Y(a,s),u&1&&r!==(r=Xe(o[9].total)+"")&&Y(c,r)},d(o){o&&(m(t),m(n),m(a),m(i),m(c))}}}function Lt(l){let e,t='<span class="material-symbols-outlined">close</span>',n,s;function a(){return l[7](l[9])}return{c(){e=b("button"),e.innerHTML=t,this.h()},l(i){e=v(i,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),se(e)!=="svelte-1o6tri8"&&(e.innerHTML=t),this.h()},h(){g(e,"class","upload-item-cancel"),g(e,"aria-label","Cancel upload")},m(i,r){M(i,e,r),n||(s=X(e,"click",a),n=!0)},p(i,r){l=i},d(i){i&&m(e),n=!1,s()}}}function zt(l,e){let t,n,s,a,i,r,c=e[9].fileName+"",o,u,d,f,_,p,D,E,w,T,F;function L(O,J){return O[9].status==="uploading"?jl:O[9].status==="completed"?Gl:O[9].status==="error"?Wl:Kl}let k=L(e),P=k(e);function S(O,J){return O[9].status==="uploading"?Yl:Xl}let R=S(e),U=R(e),B=e[9].status==="uploading"&&Lt(e);return{key:l,first:null,c(){t=b("div"),n=b("div"),s=b("span"),P.c(),a=V(),i=b("div"),r=b("div"),o=j(c),d=V(),f=b("div"),U.c(),_=V(),B&&B.c(),p=V(),D=b("div"),E=b("div"),w=V(),this.h()},l(O){t=v(O,"DIV",{class:!0});var J=C(t);n=v(J,"DIV",{class:!0});var N=C(n);s=v(N,"SPAN",{class:!0});var y=C(s);P.l(y),y.forEach(m),a=A(N),i=v(N,"DIV",{class:!0});var K=C(i);r=v(K,"DIV",{class:!0,title:!0});var z=C(r);o=G(z,c),z.forEach(m),d=A(K),f=v(K,"DIV",{class:!0});var H=C(f);U.l(H),H.forEach(m),K.forEach(m),_=A(N),B&&B.l(N),N.forEach(m),p=A(J),D=v(J,"DIV",{class:!0});var q=C(D);E=v(q,"DIV",{class:!0,style:!0}),C(E).forEach(m),q.forEach(m),w=A(J),J.forEach(m),this.h()},h(){g(s,"class","material-symbols-outlined upload-item-icon"),g(r,"class","upload-item-name"),g(r,"title",u=e[9].fileName),g(f,"class","upload-item-status"),g(i,"class","upload-item-info"),g(n,"class","upload-item-header"),g(E,"class","upload-progress-bar"),Ue(E,"width",e[9].progress+"%"),g(D,"class","upload-progress-bar-container"),g(t,"class","upload-item"),ae(t,"uploading",e[9].status==="uploading"),ae(t,"completed",e[9].status==="completed"),ae(t,"error",e[9].status==="error"),this.first=t},m(O,J){M(O,t,J),h(t,n),h(n,s),P.m(s,null),h(n,a),h(n,i),h(i,r),h(r,o),h(i,d),h(i,f),U.m(f,null),h(n,_),B&&B.m(n,null),h(t,p),h(t,D),h(D,E),h(t,w),F=!0},p(O,J){e=O,k!==(k=L(e))&&(P.d(1),P=k(e),P&&(P.c(),P.m(s,null))),(!F||J&1)&&c!==(c=e[9].fileName+"")&&Y(o,c),(!F||J&1&&u!==(u=e[9].fileName))&&g(r,"title",u),R===(R=S(e))&&U?U.p(e,J):(U.d(1),U=R(e),U&&(U.c(),U.m(f,null))),e[9].status==="uploading"?B?B.p(e,J):(B=Lt(e),B.c(),B.m(n,null)):B&&(B.d(1),B=null),(!F||J&1)&&Ue(E,"width",e[9].progress+"%"),(!F||J&1)&&ae(t,"uploading",e[9].status==="uploading"),(!F||J&1)&&ae(t,"completed",e[9].status==="completed"),(!F||J&1)&&ae(t,"error",e[9].status==="error")},i(O){F||(O&&Be(()=>{F&&(T||(T=he(t,ze,{duration:200},!0)),T.run(1))}),F=!0)},o(O){O&&(T||(T=he(t,ze,{duration:200},!1)),T.run(0)),F=!1},d(O){O&&m(t),P.d(),U.d(),B&&B.d(),O&&T&&T.end()}}}function Zl(l){let e,t,n=l[2]&&Ft(l);return{c(){n&&n.c(),e=Ce()},l(s){n&&n.l(s),e=Ce()},m(s,a){n&&n.m(s,a),M(s,e,a),t=!0},p(s,[a]){s[2]?n?(n.p(s,a),a&4&&ee(n,1)):(n=Ft(s),n.c(),ee(n,1),n.m(e.parentNode,e)):n&&(Pe(),te(n,1,1,()=>{n=null}),Ae())},i(s){t||(ee(n),t=!0)},o(s){te(n),t=!1},d(s){s&&m(e),n&&n.d(s)}}}function Ql(l,e,t){let n,s;be(l,He,f=>t(3,s=f));let{uploads:a=[]}=e;const i=Ne();let r=!1;function c(){t(1,r=!r)}function o(f){i("cancel",f)}function u(f){return{uploading:s("uploading"),completed:s("uploadComplete"),error:s("uploadFailed"),cancelled:s("uploadCancelled")}[f]||f}const d=f=>o(f.id);return l.$$set=f=>{"uploads"in f&&t(0,a=f.uploads)},l.$$.update=()=>{l.$$.dirty&1&&t(2,n=a.length>0)},[a,r,n,s,c,o,u,d]}class $l extends Te{constructor(e){super(),Ee(this,e,Ql,Zl,ye,{uploads:0})}}function Mt(l){let e,t;return{c(){e=b("div"),t=j(l[1]),this.h()},l(n){e=v(n,"DIV",{class:!0});var s=C(e);t=G(s,l[1]),s.forEach(m),this.h()},h(){g(e,"class","notification-title svelte-1y34szl")},m(n,s){M(n,e,s),h(e,t)},p(n,s){s&2&&Y(t,n[1])},d(n){n&&m(e)}}}function Ot(l){let e;return{c(){e=b("div"),this.h()},l(t){e=v(t,"DIV",{class:!0,style:!0}),C(e).forEach(m),this.h()},h(){g(e,"class","notification-progress svelte-1y34szl"),Ue(e,"width",l[4]+"%")},m(t,n){M(t,e,n)},p(t,n){n&16&&Ue(e,"width",t[4]+"%")},d(t){t&&m(e)}}}function xl(l){let e,t,n,s=l[5][l[0]]+"",a,i,r,c,o,u,d,f,_='<span class="material-symbols-outlined">close</span>',p,D,E,w,T,F,L=l[1]&&Mt(l),k=l[3]>0&&Ot(l);return{c(){e=b("div"),t=b("div"),n=b("span"),a=j(s),i=V(),r=b("div"),L&&L.c(),c=V(),o=b("div"),u=j(l[2]),d=V(),f=b("button"),f.innerHTML=_,p=V(),k&&k.c(),this.h()},l(P){e=v(P,"DIV",{class:!0,role:!0,"aria-live":!0});var S=C(e);t=v(S,"DIV",{class:!0});var R=C(t);n=v(R,"SPAN",{class:!0});var U=C(n);a=G(U,s),U.forEach(m),R.forEach(m),i=A(S),r=v(S,"DIV",{class:!0});var B=C(r);L&&L.l(B),c=A(B),o=v(B,"DIV",{class:!0});var O=C(o);u=G(O,l[2]),O.forEach(m),B.forEach(m),d=A(S),f=v(S,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),se(f)!=="svelte-u4oole"&&(f.innerHTML=_),p=A(S),k&&k.l(S),S.forEach(m),this.h()},h(){g(n,"class","notification-icon material-symbols-outlined svelte-1y34szl"),g(t,"class","notification-icon-wrapper svelte-1y34szl"),g(o,"class","notification-message svelte-1y34szl"),g(r,"class","notification-content svelte-1y34szl"),g(f,"class","notification-close svelte-1y34szl"),g(f,"aria-label","Close"),g(e,"class",D="notification "+l[0]+" svelte-1y34szl"),g(e,"role","alert"),g(e,"aria-live","polite")},m(P,S){M(P,e,S),h(e,t),h(t,n),h(n,a),h(e,i),h(e,r),L&&L.m(r,null),h(r,c),h(r,o),h(o,u),h(e,d),h(e,f),h(e,p),k&&k.m(e,null),w=!0,T||(F=X(f,"click",l[6]),T=!0)},p(P,[S]){(!w||S&1)&&s!==(s=P[5][P[0]]+"")&&Y(a,s),P[1]?L?L.p(P,S):(L=Mt(P),L.c(),L.m(r,c)):L&&(L.d(1),L=null),(!w||S&4)&&Y(u,P[2]),P[3]>0?k?k.p(P,S):(k=Ot(P),k.c(),k.m(e,null)):k&&(k.d(1),k=null),(!w||S&1&&D!==(D="notification "+P[0]+" svelte-1y34szl"))&&g(e,"class",D)},i(P){w||(P&&Be(()=>{w&&(E||(E=he(e,kt,{x:400,duration:400},!0)),E.run(1))}),w=!0)},o(P){P&&(E||(E=he(e,kt,{x:400,duration:400},!1)),E.run(0)),w=!1},d(P){P&&m(e),L&&L.d(),k&&k.d(),P&&E&&E.end(),T=!1,F()}}}function en(l,e,t){let{type:n="info"}=e,{title:s=""}=e,{message:a=""}=e,{duration:i=5e3}=e;const r=Ne(),c={success:"check_circle",error:"error",warning:"warning",info:"info"};let o=100,u;nt(()=>{if(i>0){const f=100/(i/50);u=setInterval(()=>{t(4,o-=f),o<=0&&(clearInterval(u),r("close"))},50)}return()=>clearInterval(u)});function d(){r("close")}return l.$$set=f=>{"type"in f&&t(0,n=f.type),"title"in f&&t(1,s=f.title),"message"in f&&t(2,a=f.message),"duration"in f&&t(3,i=f.duration)},[n,s,a,i,o,c,d]}class tn extends Te{constructor(e){super(),Ee(this,e,en,xl,ye,{type:0,title:1,message:2,duration:3})}}function Bt(l,e,t){const n=l.slice();return n[2]=e[t],n}function Ht(l,e){let t,n,s;function a(){return e[1](e[2])}return n=new tn({props:{type:e[2].type,title:e[2].title,message:e[2].message,duration:e[2].duration}}),n.$on("close",a),{key:l,first:null,c(){t=Ce(),ve(n.$$.fragment),this.h()},l(i){t=Ce(),pe(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,r){M(i,t,r),_e(n,i,r),s=!0},p(i,r){e=i;const c={};r&1&&(c.type=e[2].type),r&1&&(c.title=e[2].title),r&1&&(c.message=e[2].message),r&1&&(c.duration=e[2].duration),n.$set(c)},i(i){s||(ee(n.$$.fragment,i),s=!0)},o(i){te(n.$$.fragment,i),s=!1},d(i){i&&m(t),me(n,i)}}}function ln(l){let e,t=[],n=new Map,s,a=Ve(l[0]);const i=r=>r[2].id;for(let r=0;r<a.length;r+=1){let c=Bt(l,a,r),o=i(c);n.set(o,t[r]=Ht(o,c))}return{c(){e=b("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=v(r,"DIV",{class:!0});var c=C(e);for(let o=0;o<t.length;o+=1)t[o].l(c);c.forEach(m),this.h()},h(){g(e,"class","notification-container svelte-1ul8rpy")},m(r,c){M(r,e,c);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);s=!0},p(r,[c]){c&1&&(a=Ve(r[0]),Pe(),t=at(t,c,i,1,r,a,n,e,st,Ht,null,Bt),Ae())},i(r){if(!s){for(let c=0;c<a.length;c+=1)ee(t[c]);s=!0}},o(r){for(let c=0;c<t.length;c+=1)te(t[c]);s=!1},d(r){r&&m(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function nn(l,e,t){let n;return be(l,qe,a=>t(0,n=a)),[n,a=>qe.remove(a.id)]}class sn extends Te{constructor(e){super(),Ee(this,e,nn,ln,ye,{})}}const an=l=>({}),Rt=l=>({});function qt(l){let e,t,n,s,a,i,r,c,o,u='<span class="material-symbols-outlined">close</span>',d,f,_,p,D,E,w,T,F;const L=l[7].default,k=ot(L,l,l[6],null),P=l[7].footer,S=ot(P,l,l[6],Rt),R=S||rn(l);return{c(){e=b("div"),n=V(),s=b("div"),a=b("div"),i=b("h3"),r=j(l[1]),c=V(),o=b("button"),o.innerHTML=u,d=V(),f=b("div"),k&&k.c(),_=V(),p=b("div"),R&&R.c(),this.h()},l(U){e=v(U,"DIV",{class:!0}),C(e).forEach(m),n=A(U),s=v(U,"DIV",{class:!0});var B=C(s);a=v(B,"DIV",{class:!0});var O=C(a);i=v(O,"H3",{});var J=C(i);r=G(J,l[1]),J.forEach(m),c=A(O),o=v(O,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),se(o)!=="svelte-19rvgv4"&&(o.innerHTML=u),O.forEach(m),d=A(B),f=v(B,"DIV",{class:!0});var N=C(f);k&&k.l(N),N.forEach(m),_=A(B),p=v(B,"DIV",{class:!0});var y=C(p);R&&R.l(y),y.forEach(m),B.forEach(m),this.h()},h(){g(e,"class","modal-overlay show"),g(o,"class","modal-close"),g(o,"aria-label","Close"),g(a,"class","modal-header"),g(f,"class","modal-body"),g(p,"class","modal-footer"),g(s,"class",D="modal show modal-"+l[2]+" svelte-1p6lv8l")},m(U,B){M(U,e,B),M(U,n,B),M(U,s,B),h(s,a),h(a,i),h(i,r),h(a,c),h(a,o),h(s,d),h(s,f),k&&k.m(f,null),h(s,_),h(s,p),R&&R.m(p,null),w=!0,T||(F=[X(e,"click",l[5]),X(o,"click",l[3])],T=!0)},p(U,B){(!w||B&2)&&Y(r,U[1]),k&&k.p&&(!w||B&64)&&ct(k,L,U,U[6],w?ft(L,U[6],B,null):ut(U[6]),null),S&&S.p&&(!w||B&64)&&ct(S,P,U,U[6],w?ft(P,U[6],B,an):ut(U[6]),Rt),(!w||B&4&&D!==(D="modal show modal-"+U[2]+" svelte-1p6lv8l"))&&g(s,"class",D)},i(U){w||(U&&Be(()=>{w&&(t||(t=he(e,et,{duration:300},!0)),t.run(1))}),ee(k,U),ee(R,U),U&&Be(()=>{w&&(E||(E=he(s,yt,{duration:400,start:.9},!0)),E.run(1))}),w=!0)},o(U){U&&(t||(t=he(e,et,{duration:300},!1)),t.run(0)),te(k,U),te(R,U),U&&(E||(E=he(s,yt,{duration:400,start:.9},!1)),E.run(0)),w=!1},d(U){U&&(m(e),m(n),m(s)),U&&t&&t.end(),k&&k.d(U),R&&R.d(U),U&&E&&E.end(),T=!1,ge(F)}}}function rn(l){let e,t="Cancel",n,s;return{c(){e=b("button"),e.textContent=t,this.h()},l(a){e=v(a,"BUTTON",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-16iigyi"&&(e.textContent=t),this.h()},h(){g(e,"class","modal-btn modal-btn-secondary")},m(a,i){M(a,e,i),n||(s=X(e,"click",l[3]),n=!0)},p:we,d(a){a&&m(e),n=!1,s()}}}function on(l){let e,t,n,s,a=l[0]&&qt(l);return{c(){a&&a.c(),e=Ce()},l(i){a&&a.l(i),e=Ce()},m(i,r){a&&a.m(i,r),M(i,e,r),t=!0,n||(s=X(window,"keydown",l[4]),n=!0)},p(i,[r]){i[0]?a?(a.p(i,r),r&1&&ee(a,1)):(a=qt(i),a.c(),ee(a,1),a.m(e.parentNode,e)):a&&(Pe(),te(a,1,1,()=>{a=null}),Ae())},i(i){t||(ee(a),t=!0)},o(i){te(a),t=!1},d(i){i&&m(e),a&&a.d(i),n=!1,s()}}}function cn(l,e,t){let{$$slots:n={},$$scope:s}=e,{open:a=!1}=e,{title:i=""}=e,{size:r="md"}=e;const c=Ne();function o(){t(0,a=!1),c("close")}function u(f){f.key==="Escape"&&a&&o()}function d(f){f.target===f.currentTarget&&o()}return Qt(()=>{typeof document<"u"&&(document.body.style.overflow="")}),l.$$set=f=>{"open"in f&&t(0,a=f.open),"title"in f&&t(1,i=f.title),"size"in f&&t(2,r=f.size),"$$scope"in f&&t(6,s=f.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&typeof document<"u"&&(a?document.body.style.overflow="hidden":document.body.style.overflow="")},[a,i,r,o,u,d,s,n]}class Yt extends Te{constructor(e){super(),Ee(this,e,cn,on,ye,{open:0,title:1,size:2})}}function un(l){let e,t;return{c(){e=b("p"),t=j(l[2])},l(n){e=v(n,"P",{});var s=C(e);t=G(s,l[2]),s.forEach(m)},m(n,s){M(n,e,s),h(e,t)},p(n,s){s&4&&Y(t,n[2])},d(n){n&&m(e)}}}function fn(l){let e,t,n,s,a,i,r,c;return{c(){e=b("button"),t=j(l[4]),n=V(),s=b("button"),a=j(l[3]),this.h()},l(o){e=v(o,"BUTTON",{class:!0});var u=C(e);t=G(u,l[4]),u.forEach(m),n=A(o),s=v(o,"BUTTON",{class:!0});var d=C(s);a=G(d,l[3]),d.forEach(m),this.h()},h(){g(e,"class","modal-btn modal-btn-secondary"),g(s,"class",i="modal-btn "+l[5])},m(o,u){M(o,e,u),h(e,t),M(o,n,u),M(o,s,u),h(s,a),r||(c=[X(e,"click",l[7]),X(s,"click",l[6])],r=!0)},p(o,u){u&16&&Y(t,o[4]),u&8&&Y(a,o[3]),u&32&&i!==(i="modal-btn "+o[5])&&g(s,"class",i)},d(o){o&&(m(e),m(n),m(s)),r=!1,ge(c)}}}function dn(l){let e,t,n;function s(i){l[9](i)}let a={title:l[1],size:"sm",$$slots:{footer:[fn],default:[un]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),e=new Yt({props:a}),Le.push(()=>je(e,"open",s)),e.$on("close",l[7]),{c(){ve(e.$$.fragment)},l(i){pe(e.$$.fragment,i)},m(i,r){_e(e,i,r),n=!0},p(i,[r]){const c={};r&2&&(c.title=i[1]),r&2108&&(c.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,c.open=i[0],Ge(()=>t=!1)),e.$set(c)},i(i){n||(ee(e.$$.fragment,i),n=!0)},o(i){te(e.$$.fragment,i),n=!1},d(i){me(e,i)}}}function hn(l,e,t){let n,{open:s=!1}=e,{title:a=""}=e,{message:i=""}=e,{confirmText:r="Confirm"}=e,{cancelText:c="Cancel"}=e,{type:o="info"}=e;const u=Ne();function d(){u("confirm"),t(0,s=!1)}function f(){u("cancel"),t(0,s=!1)}function _(p){s=p,t(0,s)}return l.$$set=p=>{"open"in p&&t(0,s=p.open),"title"in p&&t(1,a=p.title),"message"in p&&t(2,i=p.message),"confirmText"in p&&t(3,r=p.confirmText),"cancelText"in p&&t(4,c=p.cancelText),"type"in p&&t(8,o=p.type)},l.$$.update=()=>{l.$$.dirty&256&&t(5,n=o==="danger"?"modal-btn-danger":"modal-btn-primary")},[s,a,i,r,c,n,d,f,o,_]}class mn extends Te{constructor(e){super(),Ee(this,e,hn,dn,ye,{open:0,title:1,message:2,confirmText:3,cancelText:4,type:8})}}function _n(l){var f;let e,t=l[5]("newName")+"",n,s,a,i,r,c=(((f=l[1])==null?void 0:f.type)==="folder"?l[5]("folderNameHint"):l[5]("fileNameHint"))+"",o,u,d;return{c(){e=b("label"),n=j(t),s=V(),a=b("input"),i=V(),r=b("p"),o=j(c),this.h()},l(_){e=v(_,"LABEL",{for:!0});var p=C(e);n=G(p,t),p.forEach(m),s=A(_),a=v(_,"INPUT",{type:!0,id:!0,class:!0,autocomplete:!0,spellcheck:!0}),i=A(_),r=v(_,"P",{class:!0});var D=C(r);o=G(D,c),D.forEach(m),this.h()},h(){g(e,"for","renameInput"),g(a,"type","text"),g(a,"id","renameInput"),g(a,"class","rename-input"),a.disabled=l[2],g(a,"autocomplete","off"),g(a,"spellcheck","false"),g(r,"class","rename-hint")},m(_,p){M(_,e,p),h(e,n),M(_,s,p),M(_,a,p),xe(a,l[3]),l[10](a),M(_,i,p),M(_,r,p),h(r,o),u||(d=[X(a,"input",l[9]),X(a,"keydown",l[8])],u=!0)},p(_,p){var D;p&32&&t!==(t=_[5]("newName")+"")&&Y(n,t),p&4&&(a.disabled=_[2]),p&8&&a.value!==_[3]&&xe(a,_[3]),p&34&&c!==(c=(((D=_[1])==null?void 0:D.type)==="folder"?_[5]("folderNameHint"):_[5]("fileNameHint"))+"")&&Y(o,c)},d(_){_&&(m(e),m(s),m(a),m(i),m(r)),l[10](null),u=!1,ge(d)}}}function pn(l){let e,t=l[5]("cancel")+"",n,s,a,i=(l[2]?l[5]("processing"):l[5]("rename"))+"",r,c,o,u;return{c(){e=b("button"),n=j(t),s=V(),a=b("button"),r=j(i),this.h()},l(d){e=v(d,"BUTTON",{class:!0});var f=C(e);n=G(f,t),f.forEach(m),s=A(d),a=v(d,"BUTTON",{class:!0});var _=C(a);r=G(_,i),_.forEach(m),this.h()},h(){var d;g(e,"class","modal-btn modal-btn-secondary"),e.disabled=l[2],g(a,"class","modal-btn modal-btn-primary"),a.disabled=c=l[2]||!l[3].trim()||l[3]===((d=l[1])==null?void 0:d.name)},m(d,f){M(d,e,f),h(e,n),M(d,s,f),M(d,a,f),h(a,r),o||(u=[X(e,"click",l[7]),X(a,"click",l[6])],o=!0)},p(d,f){var _;f&32&&t!==(t=d[5]("cancel")+"")&&Y(n,t),f&4&&(e.disabled=d[2]),f&36&&i!==(i=(d[2]?d[5]("processing"):d[5]("rename"))+"")&&Y(r,i),f&14&&c!==(c=d[2]||!d[3].trim()||d[3]===((_=d[1])==null?void 0:_.name))&&(a.disabled=c)},d(d){d&&(m(e),m(s),m(a)),o=!1,ge(u)}}}function vn(l){let e,t,n;function s(i){l[11](i)}let a={title:l[5]("renameItem"),size:"sm",$$slots:{footer:[pn],default:[_n]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),e=new Yt({props:a}),Le.push(()=>je(e,"open",s)),e.$on("close",l[7]),{c(){ve(e.$$.fragment)},l(i){pe(e.$$.fragment,i)},m(i,r){_e(e,i,r),n=!0},p(i,[r]){const c={};r&32&&(c.title=i[5]("renameItem")),r&8254&&(c.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,c.open=i[0],Ge(()=>t=!1)),e.$set(c)},i(i){n||(ee(e.$$.fragment,i),n=!0)},o(i){te(e.$$.fragment,i),n=!1},d(i){me(e,i)}}}function bn(l,e,t){let n;be(l,He,E=>t(5,n=E));let{open:s=!1}=e,{item:a=null}=e,{isLoading:i=!1}=e;const r=Ne();let c="",o;function u(){c.trim()&&c!==a.name&&r("rename",{item:a,newName:c.trim()})}function d(){r("cancel"),t(0,s=!1)}function f(E){E.key==="Enter"&&!i&&u()}function _(){c=this.value,t(3,c),t(0,s),t(1,a),t(4,o)}function p(E){Le[E?"unshift":"push"](()=>{o=E,t(4,o)})}function D(E){s=E,t(0,s)}return l.$$set=E=>{"open"in E&&t(0,s=E.open),"item"in E&&t(1,a=E.item),"isLoading"in E&&t(2,i=E.isLoading)},l.$$.update=()=>{l.$$.dirty&27&&s&&a&&(t(3,c=a.name),$t().then(()=>{if(o){o.focus();const E=c.lastIndexOf(".");E>0&&a.type==="file"?o.setSelectionRange(0,E):o.select()}}))},[s,a,i,c,o,n,u,d,f,_,p,D]}class gn extends Te{constructor(e){super(),Ee(this,e,bn,vn,ye,{open:0,item:1,isLoading:2})}}function wn(l){let e;return{c(){e=j("//todo")},l(t){e=G(t,"//todo")},m(t,n){M(t,e,n)},p:we,i:we,o:we,d(t){t&&m(e)}}}class kn extends Te{constructor(e){super(),Ee(this,e,null,wn,ye,{})}}function yn(l){let e,t,n,s,a,i,r,c,o,u,d,f,_,p,D,E,w,T,F,L,k,P,S,R,U,B,O,J,N,y,K,z,H,q,Z;t=new sn({}),s=new dl({}),s.$on("search",l[27]),r=new _l({props:{currentSection:l[11].currentSection}}),r.$on("sectionChange",l[28]),r.$on("upload",l[19]),r.$on("uploadFolder",l[20]),u=new Ll({props:{path:l[11].breadcrumbPath,isTrashView:l[11].currentSection==="trash"}}),u.$on("navigate",l[29]),f=new Pl({props:{selectedCount:l[12],isTrashView:l[11].currentSection==="trash"}}),f.$on("refresh",l[30]),f.$on("download",handleDownload),f.$on("delete",l[21]),f.$on("rename",l[31]),f.$on("newFolder",l[32]),f.$on("clearSelection",l[33]);function le(I){l[34](I)}let ue={files:l[13],isLoading:l[11].isLoading,isTrashView:l[11].currentSection==="trash"};l[11].selectedItems!==void 0&&(ue.selectedItems=l[11].selectedItems),p=new Dl({props:ue}),Le.push(()=>je(p,"selectedItems",le)),p.$on("folderOpen",l[35]),p.$on("contextmenu",l[25]),w=new Jl({props:{visible:l[2],x:l[3],y:l[4],item:l[5],isTrashView:l[11].currentSection==="trash"}}),w.$on("action",l[36]),w.$on("close",l[37]),F=new $l({props:{uploads:l[14]}}),F.$on("cancel",l[38]);function $(I){l[39](I)}let x={title:l[10]("deleteItem"),message:l[10]("deleteConfirmation"),confirmText:l[10]("delete"),type:"danger"};l[6]!==void 0&&(x.open=l[6]),k=new mn({props:x}),Le.push(()=>je(k,"open",$)),k.$on("confirm",l[22]);function ie(I){l[40](I)}let fe={item:l[9]};l[7]!==void 0&&(fe.open=l[7]),R=new gn({props:fe}),Le.push(()=>je(R,"open",ie)),R.$on("rename",l[41]);function De(I){l[42](I)}let ke={};return l[8]!==void 0&&(ke.open=l[8]),O=new kn({props:ke}),Le.push(()=>je(O,"open",De)),O.$on("create",l[43]),{c(){e=V(),ve(t.$$.fragment),n=V(),ve(s.$$.fragment),a=V(),i=b("div"),ve(r.$$.fragment),c=V(),o=b("div"),ve(u.$$.fragment),d=V(),ve(f.$$.fragment),_=V(),ve(p.$$.fragment),E=V(),ve(w.$$.fragment),T=V(),ve(F.$$.fragment),L=V(),ve(k.$$.fragment),S=V(),ve(R.$$.fragment),B=V(),ve(O.$$.fragment),N=V(),y=b("input"),K=V(),z=b("input"),this.h()},l(I){xt("svelte-1lrs79j",document.head).forEach(m),e=A(I),pe(t.$$.fragment,I),n=A(I),pe(s.$$.fragment,I),a=A(I),i=v(I,"DIV",{class:!0});var oe=C(i);pe(r.$$.fragment,oe),c=A(oe),o=v(oe,"DIV",{class:!0});var de=C(o);pe(u.$$.fragment,de),d=A(de),pe(f.$$.fragment,de),_=A(de),pe(p.$$.fragment,de),de.forEach(m),oe.forEach(m),E=A(I),pe(w.$$.fragment,I),T=A(I),pe(F.$$.fragment,I),L=A(I),pe(k.$$.fragment,I),S=A(I),pe(R.$$.fragment,I),B=A(I),pe(O.$$.fragment,I),N=A(I),y=v(I,"INPUT",{type:!0,style:!0}),K=A(I),z=v(I,"INPUT",{type:!0,webkitdirectory:!0,style:!0}),this.h()},h(){document.title="CloudCore Drive",g(o,"class","content svelte-l2hcqo"),g(i,"class","main svelte-l2hcqo"),g(y,"type","file"),y.multiple=!0,Ue(y,"display","none"),g(z,"type","file"),g(z,"webkitdirectory",""),Ue(z,"display","none")},m(I,Q){M(I,e,Q),_e(t,I,Q),M(I,n,Q),_e(s,I,Q),M(I,a,Q),M(I,i,Q),_e(r,i,null),h(i,c),h(i,o),_e(u,o,null),h(o,d),_e(f,o,null),h(o,_),_e(p,o,null),M(I,E,Q),_e(w,I,Q),M(I,T,Q),_e(F,I,Q),M(I,L,Q),_e(k,I,Q),M(I,S,Q),_e(R,I,Q),M(I,B,Q),_e(O,I,Q),M(I,N,Q),M(I,y,Q),l[44](y),M(I,K,Q),M(I,z,Q),l[46](z),H=!0,q||(Z=[X(y,"change",l[45]),X(z,"change",l[47])],q=!0)},p(I,Q){const oe={};Q[0]&2048&&(oe.currentSection=I[11].currentSection),r.$set(oe);const de={};Q[0]&2048&&(de.path=I[11].breadcrumbPath),Q[0]&2048&&(de.isTrashView=I[11].currentSection==="trash"),u.$set(de);const Re={};Q[0]&4096&&(Re.selectedCount=I[12]),Q[0]&2048&&(Re.isTrashView=I[11].currentSection==="trash"),f.$set(Re);const re={};Q[0]&8192&&(re.files=I[13]),Q[0]&2048&&(re.isLoading=I[11].isLoading),Q[0]&2048&&(re.isTrashView=I[11].currentSection==="trash"),!D&&Q[0]&2048&&(D=!0,re.selectedItems=I[11].selectedItems,Ge(()=>D=!1)),p.$set(re);const ne={};Q[0]&4&&(ne.visible=I[2]),Q[0]&8&&(ne.x=I[3]),Q[0]&16&&(ne.y=I[4]),Q[0]&32&&(ne.item=I[5]),Q[0]&2048&&(ne.isTrashView=I[11].currentSection==="trash"),w.$set(ne);const Me={};Q[0]&16384&&(Me.uploads=I[14]),F.$set(Me);const Fe={};Q[0]&1024&&(Fe.title=I[10]("deleteItem")),Q[0]&1024&&(Fe.message=I[10]("deleteConfirmation")),Q[0]&1024&&(Fe.confirmText=I[10]("delete")),!P&&Q[0]&64&&(P=!0,Fe.open=I[6],Ge(()=>P=!1)),k.$set(Fe);const Oe={};Q[0]&512&&(Oe.item=I[9]),!U&&Q[0]&128&&(U=!0,Oe.open=I[7],Ge(()=>U=!1)),R.$set(Oe);const W={};!J&&Q[0]&256&&(J=!0,W.open=I[8],Ge(()=>J=!1)),O.$set(W)},i(I){H||(ee(t.$$.fragment,I),ee(s.$$.fragment,I),ee(r.$$.fragment,I),ee(u.$$.fragment,I),ee(f.$$.fragment,I),ee(p.$$.fragment,I),ee(w.$$.fragment,I),ee(F.$$.fragment,I),ee(k.$$.fragment,I),ee(R.$$.fragment,I),ee(O.$$.fragment,I),H=!0)},o(I){te(t.$$.fragment,I),te(s.$$.fragment,I),te(r.$$.fragment,I),te(u.$$.fragment,I),te(f.$$.fragment,I),te(p.$$.fragment,I),te(w.$$.fragment,I),te(F.$$.fragment,I),te(k.$$.fragment,I),te(R.$$.fragment,I),te(O.$$.fragment,I),H=!1},d(I){I&&(m(e),m(n),m(a),m(i),m(E),m(T),m(L),m(S),m(B),m(N),m(y),m(K),m(z)),me(t,I),me(s,I),me(r),me(u),me(f),me(p),me(w,I),me(F,I),me(k,I),me(R,I),me(O,I),l[44](null),l[46](null),q=!1,ge(Z)}}}function Tn(l,e,t){let n,s,a,i,r,c,o;be(l,He,W=>t(10,n=W)),be(l,Se,W=>t(11,s=W)),be(l,jt,W=>t(49,a=W)),be(l,ll,W=>t(50,i=W)),be(l,il,W=>t(12,r=W)),be(l,al,W=>t(13,c=W)),be(l,Ke,W=>t(14,o=W));let u,d,f=!1,_=0,p=0,D=null,E=!1,w=!1,T=!1,F=null,L=null;nt(async()=>{if(!i){Gt("/login");return}await k()});async function k(W=null){Se.setLoading(!0),Se.setCurrentFolder(W);try{const ce={};W&&(ce.parentId=W);const Ie=await Qe.getFiles(a.id,ce);Se.setFiles(Ie)}catch(ce){console.error("Error loading files:",ce),qe.error(n("operationFailed"))}finally{Se.setLoading(!1)}}async function P(W){const ce=s.breadcrumbPath;Se.setBreadcrumbPath([...ce,W]),await k(W.id)}async function S(W){if(W===-1)Se.setBreadcrumbPath([]),await k(null);else{const ce=s.breadcrumbPath.slice(0,W+1);Se.setBreadcrumbPath(ce),await k(ce[ce.length-1].id)}}async function R(W){for(const ce of W){const Ie=Date.now()+Math.random();Ke.add({id:Ie,fileName:ce.name,fileSize:ce.size,progress:0,loaded:0,total:ce.size,status:"uploading"});try{await Qe.uploadFile(a.id,ce,s.currentFolderId,(Je,Ye,We)=>{Ke.updateProgress(Ie,Je,Ye,We)}),Ke.setStatus(Ie,"completed"),setTimeout(()=>Ke.remove(Ie),3e3)}catch{Ke.setStatus(Ie,"error"),qe.error(n("uploadFailed")),setTimeout(()=>Ke.remove(Ie),5e3)}}await k(s.currentFolderId)}function U(){u.click()}function B(){d.click()}async function O(){F=Array.from(s.selectedItems),t(6,E=!0)}async function J(){try{for(const W of F)await Qe.deleteItem(a.id,W);qe.success(n("itemDeleted")),Se.clearSelection(),await k(s.currentFolderId)}catch{qe.error(n("operationFailed"))}}async function N(W){t(9,L=W),t(7,w=!0)}async function y({item:W,newName:ce}){try{await Qe.renameItem(a.id,W.id,ce),qe.success(n("itemRenamed")),await k(s.currentFolderId),t(7,w=!1)}catch{qe.error(n("operationFailed"))}}function K({event:W,item:ce}){t(2,f=!0),t(3,_=W.pageX),t(4,p=W.pageY),t(5,D=ce)}function z(W){switch(t(2,f=!1),W){case"download":handleDownload(D);break;case"rename":N(D);break;case"delete":F=[D.id],t(6,E=!0);break}}const H=W=>console.log("Search:",W.detail),q=W=>Se.setSection(W.detail),Z=W=>S(W.detail),le=()=>k(s.currentFolderId),ue=()=>N(Array.from(s.selectedItems)[0]),$=()=>t(8,T=!0),x=()=>Se.clearSelection();function ie(W){l.$$.not_equal(s.selectedItems,W)&&(s.selectedItems=W,Se.set(s))}const fe=W=>P(W.detail),De=W=>z(W.detail),ke=()=>t(2,f=!1),I=W=>console.log("Cancel upload:",W.detail);function Q(W){E=W,t(6,E)}function oe(W){w=W,t(7,w)}const de=W=>y(W.detail);function Re(W){T=W,t(8,T)}const re=W=>console.log("Create folder:",W.detail);function ne(W){Le[W?"unshift":"push"](()=>{u=W,t(0,u)})}const Me=W=>R(Array.from(W.target.files));function Fe(W){Le[W?"unshift":"push"](()=>{d=W,t(1,d)})}return[u,d,f,_,p,D,E,w,T,L,n,s,r,c,o,k,P,S,R,U,B,O,J,N,y,K,z,H,q,Z,le,ue,$,x,ie,fe,De,ke,I,Q,oe,de,Re,re,ne,Me,Fe,W=>R(Array.from(W.target.files))]}class In extends Te{constructor(e){super(),Ee(this,e,Tn,yn,ye,{},null,[-1,-1])}}export{In as component};
