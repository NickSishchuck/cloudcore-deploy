import{s as we,d as f,r as Ee,b as j,p as X,i as Ie,e,q as ne,v as $e,w as o,f as l,h as c,k as w,x as Te,j as U,l as i,m as E,t as F,o as ye}from"../chunks/BOgt6p_H.js";import{S as Ae,i as Le,d as pe,t as ge,a as he,m as _e,c as ve,b as be}from"../chunks/76xsp2ES.js";import{g as Ce}from"../chunks/EbPgK0_z.js";import{T as ke,L as De,a as Ve,n as re,t as qe}from"../chunks/CddTKE1z.js";function Ne(n){let s,d,u,I,m,p,V,$,H="☁️ CloudCore",v,r,T,L,q=n[3]("username")+"",J,Y,g,Z,y,C,N=n[3]("password")+"",M,x,h,ee,b,P=(n[2]?n[3]("signingIn"):n[3]("signIn"))+"",R,te,A,S,B=n[3]("noAccount")+"",z,ae,k,O=n[3]("createAccount")+"",G,_,se,oe;return u=new ke({}),p=new De({}),{c(){s=i("div"),d=i("div"),be(u.$$.fragment),I=E(),m=i("div"),be(p.$$.fragment),V=E(),$=i("h1"),$.textContent=H,v=E(),r=i("form"),T=i("div"),L=i("label"),J=F(q),Y=E(),g=i("input"),Z=E(),y=i("div"),C=i("label"),M=F(N),x=E(),h=i("input"),ee=E(),b=i("button"),R=F(P),te=E(),A=i("div"),S=i("span"),z=F(B),ae=E(),k=i("a"),G=F(O),this.h()},l(t){s=l(t,"DIV",{class:!0});var a=c(s);d=l(a,"DIV",{class:!0});var le=c(d);ve(u.$$.fragment,le),le.forEach(f),I=w(a),m=l(a,"DIV",{class:!0});var ie=c(m);ve(p.$$.fragment,ie),ie.forEach(f),V=w(a),$=l(a,"H1",{"data-svelte-h":!0}),Te($)!=="svelte-28id4q"&&($.textContent=H),v=w(a),r=l(a,"FORM",{class:!0});var D=c(r);T=l(D,"DIV",{class:!0});var K=c(T);L=l(K,"LABEL",{for:!0});var ue=c(L);J=U(ue,q),ue.forEach(f),Y=w(K),g=l(K,"INPUT",{type:!0,id:!0}),K.forEach(f),Z=w(D),y=l(D,"DIV",{class:!0});var Q=c(y);C=l(Q,"LABEL",{for:!0});var fe=c(C);M=U(fe,N),fe.forEach(f),x=w(Q),h=l(Q,"INPUT",{type:!0,id:!0}),Q.forEach(f),ee=w(D),b=l(D,"BUTTON",{type:!0,class:!0});var de=c(b);R=U(de,P),de.forEach(f),D.forEach(f),te=w(a),A=l(a,"DIV",{class:!0});var W=c(A);S=l(W,"SPAN",{});var ce=c(S);z=U(ce,B),ce.forEach(f),ae=w(W),k=l(W,"A",{href:!0});var me=c(k);G=U(me,O),me.forEach(f),W.forEach(f),a.forEach(f),this.h()},h(){o(d,"class","theme-switcher"),o(m,"class","language-switcher"),o(L,"for","username"),o(g,"type","text"),o(g,"id","username"),g.required=!0,o(T,"class","form-group"),o(C,"for","password"),o(h,"type","password"),o(h,"id","password"),h.required=!0,o(y,"class","form-group"),o(b,"type","submit"),o(b,"class","btn btn-primary"),b.disabled=n[2],o(r,"class","login-form"),o(k,"href","/register"),o(A,"class","login-link"),o(s,"class","login-container")},m(t,a){Ie(t,s,a),e(s,d),_e(u,d,null),e(s,I),e(s,m),_e(p,m,null),e(s,V),e(s,$),e(s,v),e(s,r),e(r,T),e(T,L),e(L,J),e(T,Y),e(T,g),X(g,n[0]),e(r,Z),e(r,y),e(y,C),e(C,M),e(y,x),e(y,h),X(h,n[1]),e(r,ee),e(r,b),e(b,R),e(s,te),e(s,A),e(A,S),e(S,z),e(A,ae),e(A,k),e(k,G),_=!0,se||(oe=[ne(g,"input",n[5]),ne(h,"input",n[6]),ne(r,"submit",$e(n[4]))],se=!0)},p(t,[a]){(!_||a&8)&&q!==(q=t[3]("username")+"")&&j(J,q),a&1&&g.value!==t[0]&&X(g,t[0]),(!_||a&8)&&N!==(N=t[3]("password")+"")&&j(M,N),a&2&&h.value!==t[1]&&X(h,t[1]),(!_||a&12)&&P!==(P=(t[2]?t[3]("signingIn"):t[3]("signIn"))+"")&&j(R,P),(!_||a&4)&&(b.disabled=t[2]),(!_||a&8)&&B!==(B=t[3]("noAccount")+"")&&j(z,B),(!_||a&8)&&O!==(O=t[3]("createAccount")+"")&&j(G,O)},i(t){_||(he(u.$$.fragment,t),he(p.$$.fragment,t),_=!0)},o(t){ge(u.$$.fragment,t),ge(p.$$.fragment,t),_=!1},d(t){t&&f(s),pe(u),pe(p),se=!1,Ee(oe)}}}function Pe(n,s,d){let u;ye(n,qe,v=>d(3,u=v));let I="",m="",p=!1;async function V(){d(2,p=!0);try{const v=await fetch("http://localhost:5000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:I,password:m})}),r=await v.json();v.ok?(Ve.login(r.token,r.user),re.success(u("welcomeBack",{username:r.user.username})),Ce("/")):re.error(r.message||u("signInFailed"))}catch{re.error(u("networkError"))}finally{d(2,p=!1)}}function $(){I=this.value,d(0,I)}function H(){m=this.value,d(1,m)}return[I,m,p,u,V,$,H]}class Ue extends Ae{constructor(s){super(),Le(this,s,Pe,Ne,we,{})}}export{Ue as component};
